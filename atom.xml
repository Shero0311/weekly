<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  
  <title><![CDATA[w3cTrain]]></title>
  <subtitle><![CDATA[Keep Moving]]></subtitle>
  <link href="/atom.xml" rel="self"/>
  <link href="http://w3ctrain.com//"/>
  <updated>2016-03-06T02:22:56.000Z</updated>
  <id>http://w3ctrain.com//</id>
  
  <author>
    <name><![CDATA[helkyle]]></name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title><![CDATA[多个 git 账号的 ssh 配置]]></title>
    <link href="http://w3ctrain.com/2016/03/06/mutiple-ssh-key/"/>
    <id>http://w3ctrain.com/2016/03/06/mutiple-ssh-key/</id>
    <published>2016-03-06T01:51:04.000Z</published>
    <updated>2016-03-06T02:22:56.000Z</updated>
    <content type="html"><![CDATA[<h2 id="什么是_SSH_?">什么是 SSH ?</h2><p>SSH 是一种网络协议，用于计算机之间的加密安全登录。</p>
<p>配饰好ssh 之后，可以实现无密码访问。</p>
<h2 id="配置单个公钥">配置单个公钥</h2><p>检查是否存在 ~/.ssh 文件夹，如果不存在则先新建，然后使用 ssh-keygen 生成文件</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># &#27809;&#26377;.ssh&#25991;&#20214;&#22841;&#65292;&#25165;&#38656;&#35201;&#21019;&#24314;  &#10;mkdir ~/.ssh&#10;&#10;cd ~/.ssh&#10;&#10;# -t &#25351;&#23450;&#23494;&#38053;&#31867;&#22411;&#65292;&#40664;&#35748;&#21363; rsa &#65292;&#21487;&#20197;&#30465;&#30053;  &#10;# -C &#35774;&#32622;&#27880;&#37322;&#25991;&#23383;&#65292;&#27604;&#22914;&#20320;&#30340;&#37038;&#31665;&#65288;&#27880;&#24847;&#26159;&#22823;&#20889;&#30340;C&#65292;&#24182;&#19988;&#37038;&#31665;&#24038;&#21491;&#26377;&#24341;&#21495;&#65289;&#10;# &#27492;&#26041;&#27861;&#20250;&#40664;&#35748;&#22312;`~/.ssh/`&#19979;&#29983;&#25104;&#19968;&#20010;&#21517;&#23383;`id_rsa`&#30340;&#31169;&#38053;&#25991;&#20214;&#65292;&#21450;`id_rsa.pub`&#30340;&#20844;&#38053;&#25991;&#20214;  &#10;ssh-keygen -t rsa -C &#34;&#123;your_email@email.com&#125;&#34;</span><br></pre></td></tr></table></figure>
<h2 id="配置多个公钥">配置多个公钥</h2><figure class="highlight"><table><tr><td class="code"><pre><span class="line"># &#20197;&#19979;&#20004;&#31181;&#20219;&#36873;&#19968;&#31181;&#21363;&#21487;  &#10;# 1. &#29983;&#25104;&#26032;&#30340;ssh key&#24182;&#21629;&#21517;&#20026;`custom_rsa`  &#10;ssh-keygen -t rsa -C &#34;your_email@email.com&#34; -f ~/.ssh/custom_rsa  &#10;&#10;# 2. &#25110; &#25171;&#20197;&#19979;&#21629;&#20196;&#21518;&#65292;&#22312;&#35810;&#38382;&#26102;&#36755;&#20837;&#21517;&#31216;&#10;ssh-keygen -t rsa -C &#34;your_email@email.com&#34;</span><br></pre></td></tr></table></figure>
<p>一路回车，然后复制新生成的 custom_rsa.pub 里面的内容，后面需要把内容粘贴到服务器上。</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line"># &#22797;&#21046;id_rsa.pub&#37324;&#30340;&#20869;&#23481;&#21040;&#21098;&#36148;&#26495;&#65292;&#25110;&#26159;&#25163;&#21160;&#21435; ~/.ssh/custom_rsa.pub &#22797;&#21046;    &#10;pbcopy &#60; ~/.ssh/custom_rsa.pub</span><br></pre></td></tr></table></figure>
<p>修改 ~/.ssh 下的 config 文件，<br><figure class="highlight"><table><tr><td class="code"><pre><span class="line">&#10;vim ~/.ssh/config</span><br></pre></td></tr></table></figure></p>
<p>实例：</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line"># desc: github (github@email.com)&#10;Host github.com&#10;    Hostname github.com&#10;    User git&#10;    PreferredAuthentications publickey&#10;    Identityfile ~/.ssh/github&#10;&#10;# desc: my_server_user (your_email@email.com)&#10;Host your_domain_name_or_ip&#10;    HostName your_domain_name_or_ip&#10;    User git&#10;    IdentityFile ~/.ssh/custom_rsa&#10;&#10;&#10;# &#20197;&#19978;&#21508;&#23383;&#27573;&#35828;&#26126;&#65306;&#10;# Host&#65306;&#20027;&#26426;&#21517;&#23383;&#65292;&#19981;&#33021;&#37325;&#21517;&#10;# HostName&#65306;&#20027;&#26426;&#25152;&#22312;&#22495;&#21517;&#25110;IP&#10;# User&#65306;&#26381;&#21153;&#22120;&#19978;&#30340;&#29992;&#25143;&#21517;&#10;# PreferredAuthentications&#65306;&#19981;&#22635;&#27492;&#34892;&#30340;&#35805;&#65292;&#22914;&#26524;pubkey&#39564;&#35777;&#19981;&#36890;&#36807;&#21487;&#20197;&#29992;&#23494;&#30721;&#26041;&#24335;&#65307;&#22635;&#20102;`publickey`&#21482;&#33021;&#36890;&#36807;&#20844;&#38053;&#39564;&#35777;&#30340;&#26041;&#24335;&#10;# IdentityFile&#65306;&#31169;&#38053;&#36335;&#24452;</span><br></pre></td></tr></table></figure>
<h2 id="情景">情景</h2><p>我们有两个 github 账号，A 和 B 我们如何让两个 ssh  不互相影响，并且 git 操作时能智能匹配私钥？</p>
<p><strong>解决方案：</strong><br>上面的 Host 字段其实是任意的，git 操作时会有一个映射，将 Host 映射到目标域名或 ip (HostName)</p>
<p>所以我们可以这么干:<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">Host a.github.com&#10;Hostname github.com&#10;User git&#10;Identityfile ~/.ssh/a_github_rsa&#10;&#10;Host b.github.com&#10;HostName github.com&#10;User git  // &#29992;&#25143;&#21517;&#31216;&#10;IdentityFile ~/.ssh/b_github_rsa</span><br></pre></td></tr></table></figure></p>
<p><strong> 注意：公私钥命名要对应 </strong></p>
<p>然后 ssh 的地址要更改一下，比如 A 账号的 repo 仓库原本的地址是</p>
<p><code>git@github.com:A/repo.git</code>，配置了ssh 后，我们使用</p>
<p><code>git@a.github.com:A/repo.git</code></p>
<p>到这里就基本完成了(记得把公钥复制到远端仓库)，使用<code>ssh -T a.github.com</code>测试一下吧。</p>
<h2 id="推荐阅读">推荐阅读</h2><ul>
<li><a href="http://aevit.xyz/2015/11/11/vps-config/" target="_blank" rel="external">VPS配置</a></li>
</ul>
]]></content>
    <summary type="html">
    <![CDATA[<h2 id="什么是_SSH_?">什么是 SSH ?</h2><p>SSH 是一种网络协议，用于计算机之间的加密安全登录。</p>
<p>配饰好ssh 之后，可以实现无密码访问。</p>
<h2 id="配置单个公钥">配置单个公钥</h2><p>检查是否存在 ~/.ssh ]]>
    </summary>
    
      <category term="ssh" scheme="http://w3ctrain.com/tags/ssh/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[【转】如何使用Webpack]]></title>
    <link href="http://w3ctrain.com/2016/03/02/webpack-howto/"/>
    <id>http://w3ctrain.com/2016/03/02/webpack-howto/</id>
    <published>2016-03-02T00:38:40.000Z</published>
    <updated>2016-03-02T00:45:24.000Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>以下内容转自 <a href="https://github.com/petehunt/webpack-howto" target="_blank" rel="external">webpack-howto</a></p>
</blockquote>
<h2 id="本教程的目标">本教程的目标</h2><p>这是一本教你如何应用webpack到你的项目中的工具书。它包含了我们在<code>Instagram</code>中用到的绝大多数的内容。</p>
<p>我的建议：这个教程作为你第一个<code>webpack</code>的文档，学习完以后去看它的官方文档，了解更详细的说明。</p>
<h2 id="学习的前提">学习的前提</h2><ul>
<li>你了解过类似<code>browserify</code>、<code>RequireJS</code>的东西</li>
<li>你知道:<ul>
<li>Bundle的拆分</li>
<li>异步的加载</li>
<li>打包images和css的这一类的静态资源</li>
</ul>
</li>
</ul>
<h2 id="1-_为什么选择_webpack?">1. 为什么选择 webpack?</h2><ul>
<li><strong>它和browserify类似</strong> 但是它可以把你的应用拆分成多个文件。如果你的单页应用里有很多页面，用户只会下载当前访问页面的代码。当他们访问应用中的其他页面时，不再需要加载与之前页面重复的通用代码。</li>
<li><strong>它可以替代gulp和grunt</strong> 因为他可以构建打包css、预处理css、编译js和图片等。</li>
</ul>
<p>它支持AMD和CommonJS，以及其他的模块系统(Angular, ES6)。如果你不太熟悉如何使用，就用CommonJS吧。</p>
<h2 id="2-_对于习惯Browserify的人可以这样使用Webpack">2. 对于习惯Browserify的人可以这样使用Webpack</h2><p>下面的命令是等价的:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">browserify main.js &gt; bundle.js</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line">webpack main.js bundle.js</span><br></pre></td></tr></table></figure>
<p>然而，webpack要比Browserify强大。所以一般情况下你需要建立一个<code>webpack.config.js</code>文件来配置webpack。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: <span class="string">'./main.js'</span>,</span><br><span class="line">  output: &#123;</span><br><span class="line">    filename: <span class="string">'bundle.js'</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>这就是单纯的JS，所有写这个配置文件毫无压力。</p>
<h2 id="3-_如何调用webpack">3. 如何调用webpack</h2><p>选择一个目录下有<code>webpack.config.js</code>文件的文件夹，然后运行下面的命令:</p>
<ul>
<li><code>webpack</code> 开发环境下编译</li>
<li><code>webpack -p</code> 产品编译及压缩</li>
<li><code>webpack --watch</code> 开发环境下持续的监听文件变动来进行编译(非常快!)</li>
<li><code>webpack -d</code> 引入 source maps</li>
</ul>
<h2 id="4-_编译js">4. 编译js</h2><p>webpack可以和browserify、RequireJS一样作为一个<strong>loader</strong>(加载工具)来使用。下面我们来看下如何使用webpack去加载、编译CoffeeScript和JSX+ES6。(这里你必须先 <code>npm install babel-loader coffee-loader</code>):</p>
<p>你也要看下<a href="https://www.npmjs.com/package/babel-loader" target="_blank" rel="external">babel-loader的介绍</a>，它会作为一个开发环境下的依赖加载到我们的项目中(run <code>npm install babel-core babel-preset-es2015 babel-preset-react</code>)</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: <span class="string">'./main.js'</span>, <span class="comment">// 入口文件</span></span><br><span class="line">  output: &#123;</span><br><span class="line">    filename: <span class="string">'bundle.js'</span> <span class="comment">// 打包输出的文件</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    loaders: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.coffee$/</span>,  <span class="comment">// test 去判断是否为.coffee的文件,是的话就是进行coffee编译</span></span><br><span class="line">        loader: <span class="string">'coffee-loader'</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.js$/</span>, <span class="comment">// test 去判断是否为.js,是的话就是进行es6和jsx的编译</span></span><br><span class="line">        loader: <span class="string">'babel-loader'</span>,</span><br><span class="line">        query: &#123;</span><br><span class="line">          presets: [<span class="string">'es2015'</span>, <span class="string">'react'</span>]</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>如果你希望在require文件时省略文件的扩展名，只需要在webpack.config.js中添加 <code>resolve.extensions</code> 来配置。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: <span class="string">'./main.js'</span>,</span><br><span class="line">  output: &#123;</span><br><span class="line">    filename: <span class="string">'bundle.js'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    loaders: [</span><br><span class="line">      &#123; test: <span class="regexp">/\.coffee$/</span>, loader: <span class="string">'coffee-loader'</span> &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">        loader: <span class="string">'babel-loader'</span>,</span><br><span class="line">        query: &#123;</span><br><span class="line">          presets: [<span class="string">'es2015'</span>, <span class="string">'react'</span>]</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  resolve: &#123;</span><br><span class="line">    <span class="comment">// 现在你require文件的时候可以直接使用require('file')，不用使用require('file.coffee')</span></span><br><span class="line">    extensions: [<span class="string">''</span>, <span class="string">'.js'</span>, <span class="string">'.json'</span>, <span class="string">'.coffee'</span>]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="5-_Css样式和图片的加载">5. Css样式和图片的加载</h2><p>首先你需要用<code>require()</code>去加载你的静态资源(named as they would with node’s <code>require()</code>):</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="built_in">require</span>(<span class="string">'./bootstrap.css'</span>);</span><br><span class="line"><span class="built_in">require</span>(<span class="string">'./myapp.less'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> img = <span class="built_in">document</span>.createElement(<span class="string">'img'</span>);</span><br><span class="line">img.src = <span class="built_in">require</span>(<span class="string">'./glyph.png'</span>);</span><br></pre></td></tr></table></figure>
<p>当你require了CSS(less或者其他)文件，webpack会在页面中插入一个内联的<code>&lt;style&gt;</code>，去引入样式。当require图片的时候，bundle文件会包含图片的url，并通过<code>require()</code>返回图片的url。</p>
<p>但是这需要你在<code>webpack.config.js</code>做相应的配置(这里还是使用loaders)</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: <span class="string">'./main.js'</span>,</span><br><span class="line">  output: &#123;</span><br><span class="line">    path: <span class="string">'./build'</span>, <span class="comment">// 图片和js会放在这</span></span><br><span class="line">    publicPath: <span class="string">'http://mycdn.com/'</span>, <span class="comment">// 这里用来生成图片的地址</span></span><br><span class="line">    filename: <span class="string">'bundle.js'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    loaders: [</span><br><span class="line">      &#123; test: <span class="regexp">/\.less$/</span>, loader: <span class="string">'style-loader!css-loader!less-loader'</span> &#125;, <span class="comment">// 用!去链式调用loader</span></span><br><span class="line">      &#123; test: <span class="regexp">/\.css$/</span>, loader: <span class="string">'style-loader!css-loader'</span> &#125;,</span><br><span class="line">      &#123;test: <span class="regexp">/\.(png|jpg)$/</span>, loader: <span class="string">'url-loader?limit=8192'</span>&#125; <span class="comment">// 内联的base64的图片地址，图片要小于8k，直接的url的地址则不解析</span></span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<h2 id="6-_功能标识（Feature_flags）">6. 功能标识（Feature flags）</h2><p>项目中有些代码我们只为在开发环境（例如日志）或者是内部测试环境（例如那些没有发布的新功能）中使用，那就需要引入下面这些魔法全局变量（magic globals）：</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (__DEV__) &#123;</span><br><span class="line">  <span class="built_in">console</span>.warn(<span class="string">'Extra logging'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="keyword">if</span> (__PRERELEASE__) &#123;</span><br><span class="line">  showSecretFeature();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>同时还要在webpack.config.js中配置这些变量，使得webpack能够识别他们。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// definePlugin 会把定义的string 变量插入到Js代码中。</span></span><br><span class="line"><span class="keyword">var</span> definePlugin = <span class="keyword">new</span> webpack.DefinePlugin(&#123;</span><br><span class="line">  __DEV__: <span class="built_in">JSON</span>.stringify(<span class="built_in">JSON</span>.parse(process.env.BUILD_DEV || <span class="string">'true'</span>)),</span><br><span class="line">  __PRERELEASE__: <span class="built_in">JSON</span>.stringify(<span class="built_in">JSON</span>.parse(process.env.BUILD_PRERELEASE || <span class="string">'false'</span>))</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: <span class="string">'./main.js'</span>,</span><br><span class="line">  output: &#123;</span><br><span class="line">    filename: <span class="string">'bundle.js'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [definePlugin]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>配置完成后，就可以使用 <code>BUILD_DEV=1 BUILD_PRERELEASE=1 webpack</code>来打包代码了。<br>值得注意的是，<code>webpack -p</code> 会删除所有无作用代码，也就是说那些包裹在这些全局变量下的代码块都会被删除，这样就能保证这些代码不会因发布上线而泄露。</p>
<h2 id="7-_多个入口文件">7. 多个入口文件</h2><p>如果你有两个页面：profile和feed。如果你希望用户访问profile页面时不加载feed页面的代码，那就需要生成多个bundles文件：为每个页面创建自己的“main module”（入口文件）。</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: &#123;</span><br><span class="line">    Profile: <span class="string">'./profile.js'</span>,</span><br><span class="line">    Feed: <span class="string">'./feed.js'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  output: &#123;</span><br><span class="line">    path: <span class="string">'build'</span>,</span><br><span class="line">    filename: <span class="string">'[name].js'</span> <span class="comment">// name是基于上边entry中定义的key</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>在profile页面中插入<code>&lt;script src=&quot;build/Profile.js&quot;&gt;&lt;/script&gt;</code>。feed也一样。</p>
<h2 id="8-_优化通用代码">8. 优化通用代码</h2><p>Feed和Profile页面存在大量通用代码(比如React、公共的样式和组件等等)。webpack可以抽离页面间公共的代码，生成一个公共的bundle文件，供这两个页面缓存使用:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> commonsPlugin =</span><br><span class="line">  <span class="keyword">new</span> webpack.optimize.CommonsChunkPlugin(<span class="string">'common.js'</span>); <span class="comment">// 引入插件</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: &#123;</span><br><span class="line">    Profile: <span class="string">'./profile.js'</span>,</span><br><span class="line">    Feed: <span class="string">'./feed.js'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  output: &#123;</span><br><span class="line">    path: <span class="string">'build'</span>,</span><br><span class="line">    filename: <span class="string">'[name].js'</span> <span class="comment">// 为上面entry的key值</span></span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [commonsPlugin]</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>在上一步引入自己的bundle之前引入<code>&lt;script src=&quot;build/common.js&quot;&gt;&lt;/script&gt;</code></p>
<h2 id="9-_异步加载">9. 异步加载</h2><p>虽然CommonJS是同步加载的，但是webpack也提供了异步加载的方式。这对于单页应用中使用的客户端路由非常有用。当真正路由到了某个页面的时候，它的代码才会被加载下来。</p>
<p>指定你要异步加载的 <strong>拆分点</strong>。看下面的例子</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (<span class="built_in">window</span>.location.pathname === <span class="string">'/feed'</span>) &#123;</span><br><span class="line">  showLoadingState();</span><br><span class="line">  <span class="built_in">require</span>.ensure([], <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="comment">// 这个语法痕奇怪，但是还是可以起作用的</span></span><br><span class="line">    hideLoadingState();</span><br><span class="line">    <span class="built_in">require</span>(<span class="string">'./feed'</span>).show(); <span class="comment">// 当这个函数被调用的时候，此模块是一定已经被同步加载下来了</span></span><br><span class="line">  &#125;);</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">window</span>.location.pathname === <span class="string">'/profile'</span>) &#123;</span><br><span class="line">  showLoadingState();</span><br><span class="line">  <span class="built_in">require</span>.ensure([], <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    hideLoadingState();</span><br><span class="line">    <span class="built_in">require</span>(<span class="string">'./profile'</span>).show();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>剩下的事就可以交给webpack，它会为你生成并加载这些额外的 <strong>chunk</strong> 文件。</p>
<p>webpack 默认会从项目的根目录下引入这些chunk文件。你也可以通过 <code>output.publicPath</code>来配置chunk文件的引入路径</p>
<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="comment">// webpack.config.js</span></span><br><span class="line">output: &#123;</span><br><span class="line">    path: <span class="string">"/home/proj/public/assets"</span>, <span class="comment">// webpack的build路径</span></span><br><span class="line">    publicPath: <span class="string">"/assets/"</span> <span class="comment">// 你require的路径</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="其他">其他</h2><p>看一个真实的例子，<a href="http://youtu.be/VkTCL6Nqm6Y" target="_blank" rel="external">看看他们是怎么使用webpack</a>。这是Pete Hunt在Instagram.com中谈论webpack的视频。</p>
<h2 id="FAQ">FAQ</h2><h3 id="webpack_不仅仅是个modular">webpack 不仅仅是个modular</h3><p>相比较browserify和browserify，在你的项目中大量的使用webpack插件才能体现出webpack的优势。当使用了插件后，代码才会被复写。其余的都是默认加载。</p>
]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>以下内容转自 <a href="https://github.com/petehunt/webpack-howto" target="_blank" rel="external">webpack-howto</a></p>
</blockquote]]>
    </summary>
    
      <category term="webpack" scheme="http://w3ctrain.com/tags/webpack/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[小动画——云南旅行记]]></title>
    <link href="http://w3ctrain.com/2016/02/28/cd-for-trival/"/>
    <id>http://w3ctrain.com/2016/02/28/cd-for-trival/</id>
    <published>2016-02-28T08:57:25.000Z</published>
    <updated>2016-02-28T09:20:40.000Z</updated>
    <content type="html"><![CDATA[<p>无聊写个小动画~</p>
<div style="text-align:center;"><br><iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width="280" height="86" src="http://music.163.com/outchain/player?type=2&id=274859&height=66" align="center"></iframe><br></div>

<p><img src="http://7xlkda.com1.z0.glb.clouddn.com/cd.gif" alt="CD-for-trival"></p>
<a id="more"></a>
<h2 id="CodePen">CodePen</h2><p></p><p data-height="402" data-theme-id="0" data-slug-hash="PNoaYB" data-default-tab="result" data-user="HelKyle" class="codepen">See the Pen <a href="http://codepen.io/HelKyle/pen/PNoaYB/" target="_blank" rel="external">CD</a> by Helkyle (<a href="http://codepen.io/HelKyle" target="_blank" rel="external">@HelKyle</a>) on <a href="http://codepen.io" target="_blank" rel="external">CodePen</a>.</p><p></p>
<script async src="//assets.codepen.io/assets/embed/ei.js"></script>

<h2 id="无聊">无聊</h2><p>过年前一个人去了趟云南，没有惊喜，没有艳遇，毕业旅游就平平淡淡地落幕了。<br>路线是广州-昆明-大理-丽江-泸沽湖-丽江-广州~<br>青旅认识的摄影师小槐记录了 <a href="http://www.mafengwo.cn/i/5393531.html" target="_blank" rel="external">路上的点滴</a>。<br>散完心，该开始挣钱养家了。</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>无聊写个小动画~</p>
<div style="text-align:center;"><br><iframe frameborder="no" border="0" marginwidth="0" marginheight="0" width=280 height=86 src="http://music.163.com/outchain/player?type=2&id=274859&height=66" align="center"></iframe><br></div>

<p><img src="http://7xlkda.com1.z0.glb.clouddn.com/cd.gif" alt="CD-for-trival"></p>]]>
    
    </summary>
    
  </entry>
  
  <entry>
    <title><![CDATA[也许你并不需要 Gulp， Grunt ?]]></title>
    <link href="http://w3ctrain.com/2016/02/27/why-npm-scripts/"/>
    <id>http://w3ctrain.com/2016/02/27/why-npm-scripts/</id>
    <published>2016-02-27T01:40:16.000Z</published>
    <updated>2016-02-27T01:41:32.000Z</updated>
    <content type="html"><![CDATA[<p>我已经在我的项目中使用 <a href="https://docs.npmjs.com/misc/scripts" target="_blank" rel="external">npm scripts</a> 有六个月。在之前，我一直使用 <a href="http://gulpjs.com/" target="_blank" rel="external">Gulp</a> , <a href="http://gruntjs.com/" target="_blank" rel="external">Grunt</a> ,它们帮了我很多，让我的任务完成得更加高效，也自动帮我处理很多繁琐的任务。 然而，我开始感觉到我好想是在跟工具战斗而不是关乎自己的代码。</p>
<p>Grunt, Gulp, Broccoli,, Brunch 等等工具都要求你的任务符合它们定出的规则，每个工具都要你花时间去了解。并且一旦代码复杂性提高了，你需要花更多精力去处理这些工具。</p>
<p>这些构建工具依靠的插件外面包裹了一层命令行工具，在核心工具外面多了一层抽象，这也意味着可能存在隐患。</p>
<h2 id="下面三个问题我遇到过好多次">下面三个问题我遇到过好多次</h2><ul>
<li>如果这个工具下没有你想要的插件，那你就太不幸了（除非你自己写一个）</li>
<li>你尝试使用的插件包裹着你想用的另一个工具的老版本，那么会导致特性和文档对不上号。</li>
<li>错误不是一直都能被很好处理，如果一个插件出错了，它可能不会把错误抛出，这会导致你很痛苦，因为不知道如何 Debug 。</li>
</ul>
<h2 id="但是，记住">但是，记住</h2><p>我想说：<strong>如果你对当前使用的构建工具非常满意，并且你要的它都能给你，咁你keep住就嘚啦。</strong> 只是因为 npm scripts 越来越重要，而不是说你必须跳船。把注意力集中于编写程序而不是用在学习工具。如果你也觉得你是在和工具战斗，那么我建议你尝试使用 npm scripts</p>
<p>如果你真的想开始使用 npm scripts，那么请继续看下去！你会看到很多例子，并且我建好了 <a href="https://github.com/damonbauer/npm-build-boilerplate" target="_blank" rel="external"> npm-build-boilerplate</a> 给你作为出发点。开始吧！</p>
<h2 id="编写_npm_scripts">编写 npm scripts</h2><p>我们都花了大把时间在 <code>package.json</code> 文件上，我们的依赖和 scripts 都在这，这是我 boilerplate 项目的精简版 package.json<br><figure class="highlight"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  "name": "npm-build-boilerplate",</span><br><span class="line">  "version": "1.0.0",</span><br><span class="line">  "scripts": &#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;,</span><br><span class="line">  "devDependencies": &#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>我们的 scripts 都会写在 scripts 下面，而devDependencies 下存放的是我们项目的依赖。<br>开始之前，想看看这个项目的结构:</p>
<p><a href="https://cdn.css-tricks.com/wp-content/uploads/2016/02/directory.png" target="_blank" rel="external">项目结构</a></p>
<h2 id="SCSS_=&gt;_CSS">SCSS =&gt; CSS</h2><p>我是 SCSS 的狂热爱好者，所以我迫不及待地想跟你介绍。我使用 <a href="https://github.com/sass/node-sass" target="_blank" rel="external">node-sass</a> 来帮我做这项任务，<br><figure class="highlight"><table><tr><td class="code"><pre><span class="line">npm install --save-dev node-sass</span><br></pre></td></tr></table></figure></p>
<p>使用上面的命令安装好 node-sass, 那么它会出现在你的 package.json 中的 devDependencies里面，这样对于其他想跑你代码的人就方便多了。安装完成之后，我们来使用它：<br><figure class="highlight"><table><tr><td class="code"><pre><span class="line">node-sass --output-style compressed -o dist/css src/scss</span><br></pre></td></tr></table></figure></p>
<p>这行命令干了这样的事： node-sass 同学 (你是学计算机的吧？) 去把 <code>src/scss</code> 下的所有 SCSS 文件都编成 CSS 然后放在 <code>dist/css</code> 下面，对了，帮我压缩一下（compressed）</p>
<p>但是大领导通常都懒得说这么长的话，它跟 scripts 说 <code>Just do IT</code>:</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">"scripts": &#123;</span><br><span class="line">  "scss": "node-sass --output-style compressed -o dist/css src/scss"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后大领导就只需要喊口号即可：<br><figure class="highlight"><table><tr><td class="code"><pre><span class="line">npm run scss</span><br></pre></td></tr></table></figure></p>
<p>这样，大领导（你）就完成了编译 Sass 的任务（just kidding）。</p>
<h2 id="接下的的部分，任何时候你都可以像上面那样创建_npm_scripts">接下的的部分，任何时候你都可以像上面那样创建 npm scripts</h2><p>只需要替换把 scss 替换成你的命令即可。</p>
<p>正如你所见，很多命令行工具都需要一大把选项供你选择。比如这里是 <a href="https://github.com/sass/node-sass#command-line-interface" target="_blank" rel="external">node-sass options</a> 下面是多个选项的配置：</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">"scripts": &#123;</span><br><span class="line">  "scss": "node-sass --output-style nested --indent-type tab --indent-width 4 -o dist/css src/scss"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Autoprefix_CSS_with_PostCSS">Autoprefix CSS with PostCSS</h2><p>现在我们使用 Autoprefixer &amp; PostCSS 来自动添加前缀，我们可以同时安装多个模块：<br><figure class="highlight"><table><tr><td class="code"><pre><span class="line">npm install --save-dev postcss-cli autoprefixer</span><br></pre></td></tr></table></figure></p>
<p>我们安装了两个模块，因为 PostCSS 默认什么都不做，他依赖于像Autoprefixer 这类插件。</p>
<p>现在我们都把两个工具添加到 devDependencies 中，在 scripts 对象中再添加一个任务：</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">"scripts": &#123;</span><br><span class="line">  ...</span><br><span class="line">  "autoprefixer": "postcss -u autoprefixer -r dist/css/*"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这个任务说，postcss 你用 autoprefixer 帮我把 <code>dist/css/*</code> 下的所有 css 文件给处理一下，那具体要适应什么浏览器你也要告诉 Autoprefix:<br><figure class="highlight"><table><tr><td class="code"><pre><span class="line">"autoprefixer": "postcss -u autoprefixer --autoprefixer.browsers '&gt; 5%, ie 9' -r dist/css/*"</span><br></pre></td></tr></table></figure></p>
<p>同样的，<a href="https://github.com/code42day/postcss-cli" target="_blank" rel="external">postcss-cli</a>, <a href="https://github.com/postcss/autoprefixer#options" target="_blank" rel="external">autoprefixer</a>也有很多可选项</p>
<h2 id="Linting_JavaScript">Linting JavaScript</h2><p>保持良好的编程风格和规范是错误最小化和开发效率的保障，<code>Linting</code> 帮助我们自动地检查，我们可以使用 <a href="https://github.com/eslint/eslint" target="_blank" rel="external">eslint</a></p>
<p>再一次，我们安装 package，这一次使用快捷方式：<br><figure class="highlight"><table><tr><td class="code"><pre><span class="line">npm i -D eslint</span><br></pre></td></tr></table></figure></p>
<p>同下面的方式一样<br><figure class="highlight"><table><tr><td class="code"><pre><span class="line">npm install --save-dev eslint</span><br></pre></td></tr></table></figure></p>
<p>安装完，我们使用 eslint 设置一些执行我们代码的基本规则，执行下面代码进入指引：<br><figure class="highlight"><table><tr><td class="code"><pre><span class="line">eslint --init</span><br></pre></td></tr></table></figure></p>
<p>我建议你选择”Answer questions about your style” 并且回答它问的问题，这会生成一个新的文件在你的项目根部。</p>
<p>再次丰富 scripts 对象：<br><figure class="highlight"><table><tr><td class="code"><pre><span class="line">&#34;scripts&#34;: &#123;&#10;  ...&#10;  &#34;lint&#34;: &#34;eslint src/js&#34;&#10;&#125;</span><br></pre></td></tr></table></figure></p>
<p>这13个字符的命令会查找在 src/js 下的所有js文件，并根据配置重新执行一遍。另外你会被<a href="http://eslint.org/docs/user-guide/command-line-interface#options" target="_blank" rel="external">这些配置</a>逼疯的。</p>
<h2 id="Uglifying_JavaScript_files">Uglifying JavaScript files</h2><p>接下来是合并压缩 JavaScript文件，我们选择 <a href="https://github.com/mishoo/UglifyJS2" target="_blank" rel="external">uglify-js</a> 来做：</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">npm i -D uglify-js</span><br></pre></td></tr></table></figure>
<p>然后再次配置 package.json :<br><figure class="highlight"><table><tr><td class="code"><pre><span class="line">"scripts": &#123;</span><br><span class="line">  ...</span><br><span class="line">  "uglify": "mkdir -p dist/js &amp;&amp; uglifyjs src/js/*.js -m -o dist/js/app.js"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>值得一提的是 npm scripts 本质上是命令行的别名，这意味着你可以在 scripts 中使用标准命令行代码，这里用到了 mkdir 和 &amp;&amp;</p>
<p>前半部分，<code>mkdir -p dist/js</code> 的意思是如果（-p）不存在这样的目录结构，则创建一个新的执行成功之后（&amp;&amp;） 再执行后半部分 <code>uglifyjs src/js/*.js -m -o dist/js/app.js&quot;</code> 这部分是告诉 uglifyjs 使用 “mangle” (-m) 命令，应用在 <code>src/js</code> 的所有js 上，并产出到 <code>dist/js/app.js</code>。</p>
<p>让我们再丰富下 uglify , 创建一个 compress 版本的 <code>dist/js/app.js</code> （使用 -c ）</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">"scripts": &#123;</span><br><span class="line">  ...</span><br><span class="line">  "uglify": "mkdir -p dist/js &amp;amp;&amp;amp; uglifyjs src/js/*.js -m -o dist/js/app.js &amp;amp;&amp;amp; uglifyjs src/js/*.js -m -c -o dist/js/app.min.js"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Compressing_Images">Compressing Images</h2><p>接下来看看压缩图片。根据 <a href="http://httparchive.org/" target="_blank" rel="external">httparchive.org</a> , 前1000 个热门网站的页面大小是 1.9mb ,而其中图片就占了 1.1mb ,所以页面提速的首要因素是压缩图片体积。</p>
<p>安装 <a href="https://github.com/imagemin/imagemin-cli" target="_blank" rel="external">imagemin-cli</a></p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">npm i -D imagemin-cli</span><br></pre></td></tr></table></figure>
<p>Imagemin 几乎可以压缩所有类型的图片，包括 GIF，JPG，SVG。你可以传递一个文件夹路径，然后它会处理其中的所有图片：</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">"scripts": &#123;</span><br><span class="line">  ...</span><br><span class="line">  "imagemin": "imagemin src/images dist/images -p",</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这个任务是压缩所有在 <code>src/images</code> 下的图片，并把结果输出到 <code>dist/images</code>。-p 的意思是 尽量创建 “progressive” 的图片。</p>
<h2 id="SVG_Sprites">SVG Sprites</h2><p>近几年 SVG 越来越受欢迎，因为它几乎兼容所有设备，可以用 CSS 调整，视觉效果良好。然而很多 SVG 编辑器会残留多余和不必要的代码。我们使用 <a href="https://github.com/svg/svgo" target="_blank" rel="external">svgo</a> 来移除。</p>
<p>你可以把压缩 SVG 和拼接精灵图放在一块，拼接精灵图我们使用<a href="https://github.com/frexy/svg-sprite-generator" target="_blank" rel="external">svg-sprite-generator</a></p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">npm i -D svgo svg-sprite-generator</span><br></pre></td></tr></table></figure>
<p>现在你应该很熟悉这种模式了吧。</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">"scripts": &#123;</span><br><span class="line">  ...</span><br><span class="line">  "icons": "svgo -f src/images/icons &amp;&amp; mkdir -p dist/images &amp;&amp; svg-sprite-generate -d src/images/icons -o dist/images/icons.svg"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>icons 这个任务做了三件事，传递了一个文件夹路径（-f）给 svgo， 然后如果没有(-p) <code>dist/images</code> 这个文件夹则创建一个，接着就拼接精灵图，结果保存到（-d） <code>src/images/icons</code>， 产出(-o)叫做 <code>dist/images/icons.svg</code></p>
<h2 id="Serve_and_Automatically_Inject_Changes_with_BrowserSync">Serve and Automatically Inject Changes with BrowserSync</h2><p>最后一个问题是 <a href="https://github.com/Browsersync/browser-sync" target="_blank" rel="external">BrowserSync</a>，他可以帮我们做的是：开启一个本地服务器，自动更新文件，自动在浏览器中同步点击，滚动效果。</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">npm i -D browser-sync</span><br></pre></td></tr></table></figure>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">"scripts": &#123;</span><br><span class="line">  ...</span><br><span class="line">  "serve": "browser-sync start --server --files 'dist/css/*.css, dist/js/*.js'"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这个任务打开一个本地服务（—server），以当前路径作为根目录，—files 参数告诉 Browsersync 监听 <code>dist</code> 下的所有css 和 js文件，一有更新，马上自动刷新页面。</p>
<h2 id="Grouping_tasks">Grouping tasks</h2><p>有了上面的代码，我们现在能够：</p>
<ul>
<li>编译 SCSS 并且自动添加前缀</li>
<li>检查并压缩 JavaScript</li>
<li>压缩图片</li>
<li>将一个 SVG 文件夹转成一张 SVG 精灵图</li>
<li>创建一个本地服务器，并实时自动刷新浏览器</li>
</ul>
<h3 id="Combining_CSS_tasks">Combining CSS tasks</h3><p>我们可以把 CSS 相关的任务合并在一起：<br><figure class="highlight"><table><tr><td class="code"><pre><span class="line">"scripts": &#123;</span><br><span class="line">  ...</span><br><span class="line">  "build:css": "npm run scss &amp;&amp; npm run autoprefixer"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>当你执行 npm run build:css ，它会在执行 scss 任务成功之后在执行 autoprefixer 。<br>其他任务也类似，我们也可以这样做</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">"scripts": &#123;</span><br><span class="line">  ...</span><br><span class="line">  "build:js": "npm run lint &amp;amp;&amp;amp; npm run uglify",</span><br><span class="line">  "build:images": "npm run imagemin &amp;&amp; npm run icons",</span><br><span class="line">  "build:all": "npm run build:css &amp;&amp; npm run build:js &amp;&amp; npm run build:images"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Watching_for_changes">Watching for changes</h2><p>我们现在还需要监听文件的变动，并自动执行相应的任务，我推荐使用 <a href="https://github.com/Qard/onchange" target="_blank" rel="external">onchange</a>，安装：</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">npm i -D onchange</span><br></pre></td></tr></table></figure>
<p>添加任务：</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">"scripts": &#123;</span><br><span class="line">  ...</span><br><span class="line">  "watch:css": "onchange 'src/scss/*.scss' -- npm run build:css",</span><br><span class="line">  "watch:js": "onchange 'src/js/*.js' -- npm run build:js",</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>任务是给 onchange 传递一个需要监听的文件路径，我们需要 onchange 自动执行的命令则放在 — 后面。</p>
<h2 id="Let’s_add_one_more_watch_command_to_finish_off_our_npm_scripts_build_process-">Let’s add one more watch command to finish off our npm scripts build process.</h2><p>安装多一个 package， <a href="https://github.com/keithamus/parallelshell" target="_blank" rel="external"> parallelshell</a></p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">npm i -D parallelshell</span><br></pre></td></tr></table></figure>
<p>再一次，添加新的任务到 scripts 对象上：</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">"scripts": &#123;</span><br><span class="line">  ...</span><br><span class="line">  "watch:all": "parallelshell 'npm run serve' 'npm run watch:css' 'npm run watch:js'"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>parallelshell 允许我们同时执行多个任务，为什么不使用 &amp;&amp; 呢?</p>
<p>因为 &amp;&amp; 的执行顺序必须是前面的执行完了才轮到后面的任务，但是 watch 类型的任务永远不会完成啊~</p>
<p>现在 watch:all 任务开启服务器，并监听代码，一旦有变动，马上刷新浏览器 perfect!</p>
<h2 id="Other_useful_tasks">Other useful tasks</h2><p>npm 有很多<a href="https://docs.npmjs.com/misc/scripts#description" target="_blank" rel="external">其他任务</a>。我们再写一个总的启动任务：</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">"scripts": &#123;</span><br><span class="line">  ...</span><br><span class="line">  "postinstall": "npm run watch:all"</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>npm install 之后就执行一下 postinstall  吧，这在团队开发中是很好的体验，克隆你代码的人执行 npm install 然后 马上 watch: all</p>
<h2 id="Wrap_Up">Wrap Up</h2><p>噢，我们做到了（终于翻译完了，好长的文章。。。），希望看完这篇文章你能学会使用 npm scripts</p>
<p>对了，我把代码都放在 <a href="https://github.com/damonbauer/npm-build-boilerplate" target="_blank" rel="external">npm-build-boilerplate</a> 上了，欢迎交流。</p>
<h2 id="译者的废话">译者的废话</h2><p>最近看到关于 npm scripts 的字眼比较多，然后就找了篇文章翻译。</p>
<ul>
<li><a href="http://w3ctrain.com/2015/12/09/generating-sprites-with-gulp/">使用gulp生成sprites图片和样式表</a></li>
<li><a href="http://w3ctrain.com/2015/12/22/gulp-for-beginners/">Gulp新手入门教程</a></li>
<li><a href="http://www.infoq.com/cn/news/2016/02/gulp-grunt-npm-scripts-part1" target="_blank" rel="external">我为何放弃Gulp与Grunt，转投npm scripts（上）</a></li>
</ul>
]]></content>
    <summary type="html">
    <![CDATA[<p>我已经在我的项目中使用 <a href="https://docs.npmjs.com/misc/scripts" target="_blank" rel="external">npm scripts</a> 有六个月。在之前，我一直使用 <a href="http://g]]>
    </summary>
    
      <category term="npm" scheme="http://w3ctrain.com/tags/npm/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[10-Top-Tips-for-Creating-Cute-Kawaii-Art]]></title>
    <link href="http://w3ctrain.com/2016/02/24/10-Top-Tips-for-Creating-Cute-Kawaii-Art/"/>
    <id>http://w3ctrain.com/2016/02/24/10-Top-Tips-for-Creating-Cute-Kawaii-Art/</id>
    <published>2016-02-24T13:29:43.000Z</published>
    <updated>2016-02-24T13:31:31.000Z</updated>
    <content type="html"><![CDATA[<p><img src="http://7xpbhk.com1.z0.glb.clouddn.com/00a.jpg" alt="enter image description here"><br>让我们从萌系风格开始来创造超级可爱的作品！在本文中我将会从配色到形状到不同的设计风格来分别讲解如何创造可爱作品的十个技巧。</p>
<h2 id="1-简约">1.简约</h2><p>简—这是你出发的最好方式。这也是萌系风格设计中能让人感觉到你在卖萌的一个关键技巧。压倒性的特征设计或者icon细节能让一些可爱的东西变得毛骨悚然。太多的细节，或者大面积现实主义冲击，也可能让作品变得可怕而不是可爱和受欢迎。<br><img src="http://7xpbhk.com1.z0.glb.clouddn.com/grean_peas_society_t-shirt_design.jpg" alt="Green Peas Society - T-shirt"><br><em><a href="http://graphicriver.net/item/green-peas-society-tshirt/5688757" target="_blank" rel="external">Green Peas Society - T-shirt</a></em><br>让我们看看上面的插图，它很非常简单也很萌。豌豆的脸是仅仅是简单的点和曲线组成。注意如何省略不必要的部分，例如上图的鼻子耳朵以及眼睛的细节对于简单可爱的设计就可以舍去了。但是像脸颊的红色点缀又会让你的作品更受欢迎，不过无论任何方式都不能过度。<br>此外，注意扁平的设计。扁平化颜色，简单的线条，再加少许个性化的东西，这种简约是所有东西都需要有的但是一点就够了。<br><img src="http://7xpbhk.com1.z0.glb.clouddn.com/apple.jpg" alt="how to cute"><br><em>How to Cute</em><br>那么萌萌的作品是怎么创作出来的呢？以上是来自<a href="http://howtocuteblog.tumblr.com/" target="_blank" rel="external">how to cute</a>(需要梯子)的一个例子，该博客致力于说明简单的形状或物体是怎么组合变得可爱的。</p>
<h2 id="2-通过配色来让作品变得可爱">2.通过配色来让作品变得可爱</h2><p>所有颜色都是艺术的有效表达形式，有一些颜色就是长得比别的可爱。大多萌萌的作品都有一个纯真的气息，并且与孩童的设计，媒体有很多共同之处。<br>当然这并不是说，可爱的风格设计仅仅是针对儿童或者面向儿童，而是要说明不同的色彩会表达不同的情感，我们可以通过收集常见的颜色让设计变得更加顺手。<br><img src="http://7xpbhk.com1.z0.glb.clouddn.com/palette1.jpg" alt="Rainbows, brights, and pastels"><br>多彩，亮色和粉彩在萌萌的作品中尤为常见。亮色在各种场合都适用：可爱的水果和糖果，不同的物体，充满美味的场景，可爱的人物等等。通常艺术本身是非常简单的，充满活力的颜色可以引人注目，使用丰富的亮色设计可以使可爱的作品变得更加可爱。<br>粉彩色（pastels）则更加柔和甜美，就像很多卡哇伊的角色设计。想想小兔子，棉花昂或者各种各样的糖果。接着你可以给你的配色版选一个柔和的色彩，你甚至可以在实际设计中真的应用彩虹来让他保持可爱风格。<br>有一定调色板就完全可以进行工作了。当你想限制某事物的时候可以考虑调色板中两种，三种或者四种颜色。通常这应用在要印刷可爱人物或艺术画的产品上，但它也能作为一个有趣的设计挑战。看看下面一些可爱的有限的调色板<br><img src="http://7xpbhk.com1.z0.glb.clouddn.com/palette2.jpg" alt="Three examples of cute limited color palettes."><br><em>Three examples of cute limited color palettes.</em></p>
<h2 id="3-软渐变和扁平色">3.软渐变和扁平色</h2><p>当谈到萌系设计时，它应该建立在简约风格的基础上，而扁平的色彩也是在这种设计中非常受欢迎的。当你可以简单勾出轮廓和使用扁平色彩或者添加一些阴影来增加作品的立体感的时候，你就不需要花太大功夫来制作作品了。</p>
<p><img src="http://7xpbhk.com1.z0.glb.clouddn.com/Cute_Sun_in_space-%5BConverted%5D.jpg" alt="Sun in Space"><br>如果需要更多的颜色的变化，无论是传统的还是数字化工作，都可以考虑软渐变。像这可爱的太阳的光辉，这是为保持一个很好的指南艺术品可爱而增加一些额外的细节。软渐变不会产生压倒设计和将其保持可爱友好且不用添加一个刺眼的光源或使设计过于现实。</p>
<p>当然，可以忽略这些“规则”，但是这些想法可以让你开始探索萌系设计的微小变化，不会让他产生太多杂物。</p>
<h2 id="4-圆形和边角">4.圆形和边角</h2><p>你会注意到的另一件事大多你看到的萌系设计都是没有锐利边角的。这是因为萌系设计为了儿童或年轻人：可爱的东西通常是圆形的，它可以给让你的作品变得柔和，逗人喜爱。</p>
<p><img src="http://7xpbhk.com1.z0.glb.clouddn.com/rounded.jpg" alt="enter image description here"></p>
<p>圆角是友好的， 它让当一个卡通植物的脸上有巨大的闪亮的眼睛的时候显得不那么可怕。有突兀的尖刺的植物对比起那种圆角的，看起来让狗撕咬起来会吱吱叫玩具更加具有杀伤力。</p>
<p>将觉得可怕的物体转换成婴儿房间的样子：用圆角保护去替代锐利的边缘。至于是一点点圆角还是更多，这就取决于设计的类型和个人爱好了。</p>
<h2 id="5-画一张脸">5.画一张脸</h2><p>脸颊—-这可能是在萌系设计中最常见的。从茶杯到雪花，所有物体都有脸。在印刷艺术品等各种各样的统计中，人形化物体应该是可爱和有趣的。<br>无论你是创建贴纸或图标、纺织印刷或包装设计、玩具或游戏，给你的作品加一个脸颊是将正常的东西变成课可爱的物体一个确切条件。有疑问时，画个脸！就这么简单。<br><img src="http://7xpbhk.com1.z0.glb.clouddn.com/Cute_weather_sticker-%5BConverted%5D.jpg" alt="Weather Stickers"></p>
<h2 id="6-制造情感">6.制造情感</h2><p>现在，你必须面对所有一切，你可能会希望多画一堆微笑或者你已经在创造一些可爱的字符了。这就是我们的情感制作和给予小角色的表情，例如。<br><img src="http://7xpbhk.com1.z0.glb.clouddn.com/Pricklies-AI.jpg" alt="Pricklies"><br>见上图。高兴，生气，悲伤，更多的都是用简单的形状和一定的细节来表示。侧向的V让眼睛闭上代表眨眼。如何表达生气或愤怒的表情呢？简单的改变一下颜色就好了。昏昏欲睡或放松的表情呢？看看这个半闭半睁的眼睛。<br>在镜子面前做鬼脸，观察一些你想要的信息的线条，然后将你做的不同面孔添加到所有你作品中。</p>
<h2 id="7-食物">7.食物</h2><p>正如我上面提到的各种项目，食品在萌系设计中是可以经常被见到的。也许是因为我们作为一个物种需要生存。也许是因为这是一个常见的东西几乎无处不在。也许是因为秘密食物是你的朋友。<br>无论真正的原因是什么，食品在萌系设计中的应用已经成熟。拥有或亮或柔的颜色，巴掌脸的水果、糖果、蔬菜和美味的糖果等已经准备好了让你去描绘，让你将它们添加到您的设计。<br><img src="http://7xpbhk.com1.z0.glb.clouddn.com/fruit.jpg" alt="Fruit Character Creation Kit"></p>
<h2 id="8-大头小身体">8.大头小身体</h2><p>我们谈了关于很多动物的设计，但是人或人形角色呢？正常的人类的比例可以可爱，但他们不是真正的“萌”。你必须走得更远，通常卡通设计的比例都是扭曲的然而我们也会觉得这很萌。巨大的脑袋，经常大眼睛，很小的身体。<br>在一个小小的身体我们没有太多的空间去描绘细节，但也不是完全没有。看看下面的小角色，在他的衣服上有腰带小领子不同的图案等细节。<br><img src="http://7xpbhk.com1.z0.glb.clouddn.com/Chibi%20Cuties.jpg" alt="enter image description here"><br>一些有特色的细节可以加到人物的衣服上，但想要展示折叠、缝合，透视等现实服装拥有的，将是一个不可能完成的任务。相反，我们应该将重点放在头，头发和脸上。<br>头太大会使脖子承受不住的这种万有引力定律在萌系设计中是可以被忽略的。在萌系设计中，大头画在小小的身体之上仍然很可爱。</p>
<h2 id="9-动物本身就是个萌物">9.动物本身就是个萌物</h2><p>不要忘记最可爱的生物：动物！猫、兔子、狗、小鸟小孩等等。我们喜爱动物，所以画小的圆形，简单的形式也无疑是可爱的表现。<br>大脑袋，小身体是另一种动物的特征。想想历史上最著名的萌系动物之一，Hello Kitty，她的比例和真正的猫是的比例是完全不对应的。但对于萌系动物来说，它是完美的。<br><img src="http://7xpbhk.com1.z0.glb.clouddn.com/Jump-Animal---Vector-Pack.jpg" alt="enter image description here"><br>让我们看看上面的跳的圆圆的小动物。看看他们是多么简单可爱。扁平的颜色，圆角的四肢，简约的样式，迷你的脸庞让萌萌的动物跳入我们的心。</p>
<h2 id="10-万物皆可萌">10.万物皆可萌</h2><p>我们谈了食物，动物，所有的生物，人类，和天气，但是如果是像牙齿这种东西呢？牙齿能变得萌萌的么？<br>答案是肯定的！看看下面这个非常棒的例子把平常不是很可爱的统一变得让大家觉得很萌。看着这些海盗样的牙齿尝试告诉我你不希望这些可爱的海盗牙挂在你的墙上。当然这不可能不用无聊的去尝试了=。=<br><img src="http://7xpbhk.com1.z0.glb.clouddn.com/Masquerade-%5BConverted%5D.jpg" alt="Masquerade"><br>遵守上面的建议，几乎任何东西，都能够使用萌系风格：可爱的脸颊，圆角等等。汽车，胃，镊子，税收文件….他们都是可爱的,看起来就像你最好的最可爱的最惹人喜爱的朋友。试想一下，让那些令人毛骨悚然或物或思想变成萌萌哒样子，感谢这种萌系风格的存在。</p>
<h2 id="让我们休息一下">让我们休息一下</h2><p>既然我们已经有了10个小贴士来设计萌系风格，接下来让我们列一个简单的清单：</p>
<ol>
<li>简洁是关键：用最少的细节设计你的作品。</li>
<li>让色盘保持可爱：多彩，亮色，粉彩是适合卡哇伊风格的</li>
<li>软渐变和单调的色彩：扁平的颜色很简单，通过软渐变而不创建沉重的光源</li>
<li>圆的形状和角：圆角是友好的，柔和的，惹人喜爱的</li>
<li>画一个脸！脸的意思是友好的，可爱的设计</li>
<li>制造情感：在可爱的脸上表述你的情绪</li>
<li>食物！萌系风格中常见的东西</li>
<li>大脑袋，小身体：关注萌系人物的头和脸</li>
<li>动物本身就很可爱：尤其是动物宝宝</li>
<li>万物皆可萌：看看你的办公桌或家里，一切都可以变得萌萌哒</li>
</ol>
]]></content>
    <summary type="html">
    <![CDATA[<p><img src="http://7xpbhk.com1.z0.glb.clouddn.com/00a.jpg" alt="enter image description here"><br>让我们从萌系风格开始来创造超级可爱的作品！在本文中我将会从配色到形状到不同的设计风]]>
    </summary>
    
      <category term="Design" scheme="http://w3ctrain.com/tags/Design/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Javascript 中的 AOP]]></title>
    <link href="http://w3ctrain.com/2016/02/22/aop-in-javascript/"/>
    <id>http://w3ctrain.com/2016/02/22/aop-in-javascript/</id>
    <published>2016-02-22T02:12:49.000Z</published>
    <updated>2016-02-22T02:55:25.000Z</updated>
    <content type="html"><![CDATA[<p>AOP(Aspect Oriented Programming) 意为面向切面编程，利用AOP可以对业务逻辑各个部分进行隔离，从而使得业务逻辑各部分的耦合度降低，提高程序的可重用性。</p>
<h2 id="主要功能">主要功能</h2><p>日志记录，性能统计，安全控制，事务处理，异常处理等等</p>
<h2 id="主要意图">主要意图</h2><p>将日志记录，性能统计，安全控制，事务处理，异常处理等代码从业务逻辑代码中划分出来，通过对这些行为的分离，我们希望可以将它们独立到非指导业务逻辑的方法中，进而改变这些行为的时候不影响业务逻辑的代码。</p>
<p>以上内容来自百度百科…</p>
<h2 id="在JavaScript中的应用">在JavaScript中的应用</h2><p>JavaScript 中函数作为第一公民，有很多用法微妙的用法，实现AOP也很简单。我们可以把函数当成参数传递到另外一个函数中。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">Function</span>.prototype.after = <span class="function"><span class="keyword">function</span> (<span class="params">action</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> func = <span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> result = func.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>);</span><br><span class="line">        action.apply(<span class="keyword">this</span>,<span class="built_in">arguments</span>);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">Function</span>.prototype.before = <span class="function"><span class="keyword">function</span> (<span class="params">action</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> func = <span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        action.apply(<span class="keyword">this</span>,<span class="built_in">arguments</span>);</span><br><span class="line">        <span class="keyword">return</span> func.apply(<span class="keyword">this</span>, <span class="built_in">arguments</span>);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>拿 before 来解释下，首先保留一个 this （原函数）的引用，然后返回一个包含原函数和新函数的‘新函数’，在这个’新函数’里面，我们按照需求把两个函数执行一遍，并返回原函数执行的结果，保证 this 不被劫持。</p>
<p>由于我们是在Function.prototype上进行扩展，所以所有的Function都可以使用这样的方法。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> foo = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">2</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foo = foo.before(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">1</span>);</span><br><span class="line">&#125;).after(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">3</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">foo();</span><br></pre></td></tr></table></figure>
<p>执行结果就是<code>1，2 ，3</code>。</p>
<p>这种做法很妙，我们可以把与核心业务逻辑模块无关的功能抽离出来，然后在不修改源代码的情况下给程序动态地添加功能。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> foo = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="comment">// 成千上万行代码</span></span><br><span class="line">  bar();</span><br><span class="line">  <span class="comment">// 成千上万行代码</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>=&gt;</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> foo = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="comment">// 成两千上万行代码</span></span><br><span class="line">&#125;).after(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  bar();</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<p>改写过后会让我们的业务逻辑模块更加纯净。</p>
<h2 id="推荐阅读">推荐阅读</h2><ul>
<li><a href="http://www.alloyteam.com/2013/08/yong-aop-gai-shan-javascript-dai-ma/" target="_blank" rel="external">AllyTeam - 用AOP改善javascript代码</a></li>
<li><a href="http://www.amazon.cn/JavaScript%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B8%8E%E5%BC%80%E5%8F%91%E5%AE%9E%E8%B7%B5-%E6%9B%BE%E6%8E%A2/dp/B00XJ2AU3S/ref=sr_1_3?ie=UTF8&amp;qid=1456109609&amp;sr=8-3&amp;keywords=JavaScript+%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F" target="_blank" rel="external">《JavaScript设计模式与开发实践》</a></li>
</ul>
]]></content>
    <summary type="html">
    <![CDATA[<p>AOP(Aspect Oriented Programming) 意为面向切面编程，利用AOP可以对业务逻辑各个部分进行隔离，从而使得业务逻辑各部分的耦合度降低，提高程序的可重用性。</p>
<h2 id="主要功能">主要功能</h2><p>日志记录，性能统计，安全控制，]]>
    </summary>
    
      <category term="AOP" scheme="http://w3ctrain.com/tags/AOP/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[几个实用的Sass mixins]]></title>
    <link href="http://w3ctrain.com/2016/02/21/useful-sass-mixins/"/>
    <id>http://w3ctrain.com/2016/02/21/useful-sass-mixins/</id>
    <published>2016-02-21T14:21:20.000Z</published>
    <updated>2016-02-21T15:36:02.000Z</updated>
    <content type="html"><![CDATA[<p>Mixins 是 Sass (其实很多预处理语言都有) 中用来方便地复用代码的方法，你可以简单点理解成函数，返回的是一组 CSS 属性或代码。</p>
<figure class="highlight scss"><table><tr><td class="code"><pre><span class="line"><span class="at_rule">@<span class="keyword">mixin</span><span class="preprocessor"> border-radius</span>(<span class="variable">$radius</span>) &#123;</span></span><br><span class="line">  -webkit-<span class="attribute">border-radius</span><span class="value">: <span class="variable">$radius</span>;</span></span><br><span class="line">     -moz-<span class="attribute">border-radius</span><span class="value">: <span class="variable">$radius</span>;</span></span><br><span class="line">      -ms-<span class="attribute">border-radius</span><span class="value">: <span class="variable">$radius</span>;</span></span><br><span class="line">          <span class="attribute">border-radius</span><span class="value">: <span class="variable">$radius</span>;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class">.box</span> &#123; <span class="at_rule">@<span class="keyword">include</span><span class="preprocessor"> border-radius</span>(<span class="number">10px</span>);</span> &#125;</span><br></pre></td></tr></table></figure>
<p>上面的代码处理后，将得到下面 CSS  代码。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="class">.box</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">-webkit-border-radius</span>:<span class="value"> <span class="number">10px</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">-moz-border-radius</span>:<span class="value"> <span class="number">10px</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">-ms-border-radius</span>:<span class="value"> <span class="number">10px</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">border-radius</span>:<span class="value"> <span class="number">10px</span></span></span>;</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure>
<p>如果你对 Sass 不熟悉，可以先去<a href="http://sass-lang.com/" target="_blank" rel="external">学习一番</a> ，让我们进入主题，介绍几个实用的 mixins。</p>
<h2 id="Absolute_Position">Absolute Position</h2><p>如果你的页面中经常用到 absolute 定位，你可以试试下面这个：</p>
<figure class="highlight scss"><table><tr><td class="code"><pre><span class="line"><span class="at_rule">@<span class="keyword">mixin</span><span class="preprocessor"> abs-pos</span> (<span class="variable">$top</span>:<span class="preprocessor"> auto</span>, <span class="variable">$right</span>:<span class="preprocessor"> auto</span>, <span class="variable">$bottom</span>:<span class="preprocessor"> auto</span>, <span class="variable">$left</span>:<span class="preprocessor"> auto</span>) &#123;</span></span><br><span class="line">  <span class="attribute">top</span><span class="value">: <span class="variable">$top</span>;</span></span><br><span class="line">  <span class="attribute">right</span><span class="value">: <span class="variable">$right</span>;</span></span><br><span class="line">  <span class="attribute">bottom</span><span class="value">: <span class="variable">$bottom</span>;</span></span><br><span class="line">  <span class="attribute">left</span><span class="value">: <span class="variable">$left</span>;</span></span><br><span class="line">  <span class="attribute">position</span><span class="value">: absolute;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="使用">使用</h4><figure class="highlight scss"><table><tr><td class="code"><pre><span class="line"><span class="class">.abs</span> &#123;</span><br><span class="line">  <span class="at_rule">@<span class="keyword">include</span><span class="preprocessor"> abs-pos</span>(<span class="number">10px</span>,<span class="preprocessor"> 10px</span>,<span class="preprocessor"> 5px</span>,<span class="preprocessor"> 15px</span>);</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="产出">产出</h4><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="class">.abs</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">top</span>:<span class="value"> <span class="number">10px</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">right</span>:<span class="value"> <span class="number">10px</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">bottom</span>:<span class="value"> <span class="number">5px</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">left</span>:<span class="value"> <span class="number">15px</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">position</span>:<span class="value"> absolute</span></span>;</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure>
<h2 id="带有优雅降级地使用_rem_单位">带有优雅降级地使用 rem 单位</h2><p>熟悉 rem 单位的前端er是否遇到过不支持的浏览器？ 你如何解决的呢？下面这个 mixin 我们加上 px 单位作 fallback：</p>
<figure class="highlight scss"><table><tr><td class="code"><pre><span class="line"><span class="at_rule">@function<span class="preprocessor"> calculateRem</span>(<span class="variable">$size</span>:<span class="preprocessor"> 16</span>) &#123;</span></span><br><span class="line">  <span class="variable">$remSize</span><span class="value">: <span class="variable">$size</span> / <span class="number">16px</span>;</span></span><br><span class="line">  <span class="at_rule">@return <span class="variable">$remSize</span> *<span class="preprocessor"> 1rem</span>;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="at_rule">@<span class="keyword">mixin</span><span class="preprocessor"> font-size</span>(<span class="variable">$size</span>) &#123;</span></span><br><span class="line">  <span class="attribute">font-size</span><span class="value">: <span class="variable">$size</span>;</span></span><br><span class="line">  <span class="attribute">font-size</span><span class="value">: <span class="function">calculateRem</span>(<span class="variable">$size</span>);</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="使用-1">使用</h4><figure class="highlight scss"><table><tr><td class="code"><pre><span class="line"><span class="tag">p</span> &#123;</span><br><span class="line">  <span class="at_rule">@<span class="keyword">include</span><span class="preprocessor"> font-size</span>(<span class="number">14px</span>)</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure>
<h4 id="产出-1">产出</h4><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="tag">p</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">font-size</span>:<span class="value"> <span class="number">14px</span></span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">font-size</span>:<span class="value"> <span class="number">0.8rem</span></span></span>;</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure>
<h2 id="Clearfix">Clearfix</h2><p>网上有很多 clearfix 的 hacks，下面这种比较常见，兼容到 IE6以上</p>
<figure class="highlight scss"><table><tr><td class="code"><pre><span class="line"><span class="at_rule">@<span class="keyword">mixin</span><span class="preprocessor"> clearfix</span>() &#123;</span></span><br><span class="line">    &amp;<span class="pseudo">:before</span>,</span><br><span class="line">    &amp;<span class="pseudo">:after</span> &#123;</span><br><span class="line">        <span class="attribute">content</span><span class="value">: <span class="string">""</span>;</span></span><br><span class="line">        <span class="attribute">display</span><span class="value">: table;</span></span><br><span class="line">    &#125;</span><br><span class="line">    &amp;<span class="pseudo">:after</span> &#123;</span><br><span class="line">        <span class="attribute">clear</span><span class="value">: both;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="使用-2">使用</h4><figure class="highlight scss"><table><tr><td class="code"><pre><span class="line"><span class="class">.container</span> &#123;</span><br><span class="line">  <span class="at_rule">@<span class="keyword">include</span><span class="preprocessor"> clearfix</span>();</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="When-inside">When-inside</h2><p>个人比较中意的 mixin，常用在修改元素在不同状态下的属性。比如我们的H5页面会给当前页面加个 active类名，我们想让当前页面中的 foo对象执行动画。</p>
<figure class="highlight scss"><table><tr><td class="code"><pre><span class="line"><span class="comment">/// Make a context based selector a little more friendly</span></span><br><span class="line"><span class="comment">/// @author Hugo Giraudel</span></span><br><span class="line"><span class="comment">/// @param &#123;String&#125; $context</span></span><br><span class="line"><span class="at_rule">@<span class="keyword">mixin</span><span class="preprocessor"> when-inside</span>(<span class="variable">$context</span>) &#123;</span></span><br><span class="line">  #&#123;<span class="variable">$context</span>&#125; &amp; &#123;</span><br><span class="line">    <span class="at_rule">@<span class="keyword">content</span>;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="使用-3">使用</h4><figure class="highlight scss"><table><tr><td class="code"><pre><span class="line"><span class="class">.foo</span> &#123;</span><br><span class="line">  <span class="at_rule">@<span class="keyword">include</span><span class="preprocessor"> when-inside</span>(<span class="string">'.active'</span>) &#123;</span></span><br><span class="line">    <span class="attribute">animation</span><span class="value">: fadeIn <span class="number">0.3s</span> <span class="number">1s</span> forwards;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="产出-2">产出</h4><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="class">.active</span> <span class="class">.foo</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">animation</span>:<span class="value"> fadeIn <span class="number">0.3s</span> <span class="number">1s</span> forwards</span></span>; </span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure>
<h2 id="方便的媒体查询">方便的媒体查询</h2><p>媒体查询再做响应式网站时候，非常方便。如果下面的代码满足不了你的需求的话，那么推荐你看之前的文章 <a href="http://www.w3ctrain.com/2015/12/02/sass-media-query/" target="_blank" rel="external">《使用Sass之更高级的媒体查询》</a>  </p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">$breakpoints: (</span><br><span class="line">  'sm': 'only screen and  (min-width: 480px)',</span><br><span class="line">  'md': 'only screen and ( min-width: 768px)',</span><br><span class="line">  'lg': 'only screen and ( min-width: 992px)'</span><br><span class="line">) !default;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">@mixin respond-to($breakpoint) &#123;</span><br><span class="line">  $query: map-get($breakpoints, $breakpoint);</span><br><span class="line">  </span><br><span class="line">  @if not $query &#123;</span><br><span class="line">    @error 'No value found for `#&#123;$breakpoint&#125;`. Please make sure it is defined in `$breakpoints` map.';</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  @media #&#123;if(type-of($query) == 'string', unquote($query), inspect($query))&#125; &#123;</span><br><span class="line">    @content;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="用法">用法</h4><figure class="highlight scss"><table><tr><td class="code"><pre><span class="line"><span class="class">.foo</span> &#123;</span><br><span class="line">  <span class="at_rule">@<span class="keyword">include</span><span class="preprocessor"> respond-to</span>(<span class="string">'sm'</span>) &#123;</span></span><br><span class="line">    <span class="attribute">padding-left</span><span class="value">: <span class="number">20px</span>;</span></span><br><span class="line">    <span class="attribute">padding-right</span><span class="value">: <span class="number">20px</span>;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="产出-3">产出</h4><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="at_rule">@<span class="keyword">media</span> only screen and (min-width: <span class="number">480px</span>) </span>&#123;</span><br><span class="line">  <span class="class">.foo</span> <span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">padding-left</span>:<span class="value"> <span class="number">20px</span></span></span>;</span><br><span class="line">    <span class="rule"><span class="attribute">padding-right</span>:<span class="value"> <span class="number">20px</span></span></span>; </span><br><span class="line">  &#125;</span> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="长阴影">长阴影</h2><p>这个mixin可能不常用，但是效果真的很酷~</p>
<figure class="highlight scss"><table><tr><td class="code"><pre><span class="line"><span class="at_rule">@function<span class="preprocessor"> makelongshadow</span>(<span class="variable">$color</span>) &#123;</span></span><br><span class="line">  <span class="variable">$val</span><span class="value">: <span class="number">0px</span> <span class="number">0px</span> <span class="variable">$color</span>;</span></span><br><span class="line">  <span class="at_rule">@<span class="keyword">for</span> <span class="variable">$i</span><span class="preprocessor"> from</span><span class="preprocessor"> 1</span><span class="preprocessor"> through</span><span class="preprocessor"> 200</span> &#123;</span></span><br><span class="line">    <span class="variable">$val</span><span class="value">: #&#123;<span class="variable">$val</span>&#125;, #&#123;<span class="variable">$i</span>&#125;px #&#123;<span class="variable">$i</span>&#125;px #&#123;<span class="variable">$color</span>&#125;;</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="at_rule">@return <span class="variable">$val</span>;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="at_rule">@<span class="keyword">mixin</span><span class="preprocessor"> longshadow</span>(<span class="variable">$color</span>) &#123;</span></span><br><span class="line">  <span class="attribute">text-shadow</span><span class="value">: <span class="function">makelongshadow</span>(<span class="variable">$color</span>);</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="使用-4">使用</h4><figure class="highlight scss"><table><tr><td class="code"><pre><span class="line"><span class="tag">h1</span> &#123;</span><br><span class="line">  <span class="at_rule">@<span class="keyword">include</span><span class="preprocessor"> longshadow</span>(<span class="function">darken</span>(<span class="variable">$color</span>,<span class="preprocessor"> 5</span>% ));</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="效果">效果</h4><p></p><p data-height="320" data-theme-id="0" data-slug-hash="mVZRBM" data-default-tab="result" data-user="HelKyle" class="codepen">See the Pen <a href="http://codepen.io/HelKyle/pen/mVZRBM/" target="_blank" rel="external">Long Shadow Sass Mixin</a> by Helkyle (<a href="http://codepen.io/HelKyle" target="_blank" rel="external">@HelKyle</a>) on <a href="http://codepen.io" target="_blank" rel="external">CodePen</a>.</p><p></p>
<script async src="//assets.codepen.io/assets/embed/ei.js"></script>


<h2 id="精灵图">精灵图</h2><p>之前写过一篇关于 Gulp 生成精灵图的文章，里面的 mixin 也很实用，<a href="使用gulp生成sprites图片和样式表">《http://www.w3ctrain.com/2015/12/09/generating-sprites-with-gulp/》</a></p>
<figure class="highlight scss"><table><tr><td class="code"><pre><span class="line"><span class="at_rule">@<span class="keyword">mixin</span><span class="preprocessor"> sprite-width</span>(<span class="variable">$sprite</span>) &#123;</span></span><br><span class="line">  <span class="attribute">width</span><span class="value">: <span class="function">nth</span>(<span class="variable">$sprite</span>, <span class="number">5</span>);</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="at_rule">@<span class="keyword">mixin</span><span class="preprocessor"> sprite-height</span>(<span class="variable">$sprite</span>) &#123;</span></span><br><span class="line">  <span class="attribute">height</span><span class="value">: <span class="function">nth</span>(<span class="variable">$sprite</span>, <span class="number">6</span>);</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="at_rule">@<span class="keyword">mixin</span><span class="preprocessor"> sprite-position</span>(<span class="variable">$sprite</span>) &#123;</span></span><br><span class="line">  <span class="variable">$sprite-offset-x</span><span class="value">: <span class="function">nth</span>(<span class="variable">$sprite</span>, <span class="number">3</span>);</span></span><br><span class="line">  <span class="variable">$sprite-offset-y</span><span class="value">: <span class="function">nth</span>(<span class="variable">$sprite</span>, <span class="number">4</span>);</span></span><br><span class="line">  <span class="attribute">background-position</span><span class="value">: <span class="variable">$sprite-offset-x</span>  <span class="variable">$sprite-offset-y</span>;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="at_rule">@<span class="keyword">mixin</span><span class="preprocessor"> sprite-image</span>(<span class="variable">$sprite</span>) &#123;</span></span><br><span class="line">  <span class="variable">$sprite-image</span><span class="value">: <span class="function">nth</span>(<span class="variable">$sprite</span>, <span class="number">9</span>);</span></span><br><span class="line">  <span class="attribute">background-image</span><span class="value">: <span class="function">url</span>(#&#123;<span class="variable">$sprite-image</span>&#125;);</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="at_rule">@<span class="keyword">mixin</span><span class="preprocessor"> sprite</span>(<span class="variable">$sprite</span>) &#123;</span></span><br><span class="line">  <span class="at_rule">@<span class="keyword">include</span><span class="preprocessor"> sprite-image</span>(<span class="variable">$sprite</span>);</span></span><br><span class="line">  <span class="at_rule">@<span class="keyword">include</span><span class="preprocessor"> sprite-position</span>(<span class="variable">$sprite</span>);</span></span><br><span class="line">  <span class="at_rule">@<span class="keyword">include</span><span class="preprocessor"> sprite-width</span>(<span class="variable">$sprite</span>);</span></span><br><span class="line">  <span class="at_rule">@<span class="keyword">include</span><span class="preprocessor"> sprite-height</span>(<span class="variable">$sprite</span>);</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span><br><span class="line">The `sprites` mixin generates identical output to the CSS template</span><br><span class="line">  but can be overridden inside of SCSS</span><br><span class="line"></span><br><span class="line">@include sprites($spritesheet-sprites);</span><br><span class="line">*/</span></span><br><span class="line"><span class="at_rule">@<span class="keyword">mixin</span><span class="preprocessor"> sprites</span>(<span class="variable">$sprites</span>) &#123;</span></span><br><span class="line">  <span class="at_rule">@<span class="keyword">each</span> <span class="variable">$sprite</span><span class="preprocessor"> in</span> <span class="variable">$sprites</span> &#123;</span></span><br><span class="line">    <span class="variable">$sprite-name</span><span class="value">: <span class="function">nth</span>(<span class="variable">$sprite</span>, <span class="number">10</span>);</span></span><br><span class="line">    .#&#123;<span class="variable">$sprite-name</span>&#125; &#123;</span><br><span class="line">      <span class="at_rule">@<span class="keyword">include</span><span class="preprocessor"> sprite</span>(<span class="variable">$sprite</span>);</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="总结">总结</h2><p>以上内容均为整理及实践总结而来，可能不是最优解，如果你又更好的想法，欢迎与我交流~ 用好 mixin 或许可以让你省去大量重复性工作，空出大把时间，为升职加薪迎娶白富美走上人生巅峰做梦去吧。</p>
<p>更多细化的 mixin 看相关内容中的链接。</p>
<h2 id="相关内容">相关内容</h2><ul>
<li><a href="http://compass-style.org/" target="_blank" rel="external">Compass</a></li>
<li><a href="https://github.com/web-design-weekly/sass-mixins/blob/master/mixins.scss" target="_blank" rel="external">handy-sass-mixins</a></li>
<li><a href="http://bourbon.io/" target="_blank" rel="external">Bourbon</a></li>
<li><a href="https://github.com/davidtheclark/scut" target="_blank" rel="external">Sass utilities for the frontend laborer</a></li>
<li><a href="https://github.com/colindresj/saffron" target="_blank" rel="external">saffron
</a></li>
</ul>
]]></content>
    <summary type="html">
    <![CDATA[<p>Mixins 是 Sass (其实很多预处理语言都有) 中用来方便地复用代码的方法，你可以简单点理解成函数，返回的是一组 CSS 属性或代码。</p>
<figure class="highlight scss"><table><tr><td class="code"><p]]>
    </summary>
    
      <category term="mixins" scheme="http://w3ctrain.com/tags/mixins/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[继承使用box-sizing可能会更好]]></title>
    <link href="http://w3ctrain.com/2016/02/19/inheriting-box-sizing-probably-slightly-better-best-practice/"/>
    <id>http://w3ctrain.com/2016/02/19/inheriting-box-sizing-probably-slightly-better-best-practice/</id>
    <published>2016-02-19T06:33:56.000Z</published>
    <updated>2016-02-19T06:47:17.000Z</updated>
    <content type="html"><![CDATA[<p>相信很多人跟我一样都非常喜欢使用 box-sizing ，用法大致是这样：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">*, *<span class="pseudo">:before</span>, *<span class="pseudo">:after</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">box-sizing</span>:<span class="value"> border-box</span></span>;</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure>
<p>但其实稍微调整一下会更完美：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="tag">html</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">box-sizing</span>:<span class="value"> border-box</span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line">*, *<span class="pseudo">:before</span>, *<span class="pseudo">:after</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">box-sizing</span>:<span class="value"> inherit</span></span>;</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure>
<p>这是来自 Jon Neal 的<a href="http://blog.teamtreehouse.com/box-sizing-secret-simple-css-layouts#comment-50223" target="_blank" rel="external">想法</a>，他说：</p>
<blockquote>
<p>这会给你相同的效果，但它使你能更轻易的使用其他插件或组件的box-sizing</p>
</blockquote>
<p>举个栗子，你有一个组件（ component ）设计之初使用的是默认的 box-sizing ( content-box )。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="class">.component</span> <span class="rules">&#123;</span><br><span class="line">  <span class="comment">/* designed to work in default box-sizing */</span></span><br><span class="line">  <span class="comment">/* in your page, you could reset it to normal */</span></span><br><span class="line">  <span class="rule"><span class="attribute">box-sizing</span>:<span class="value"> content-box</span></span>;</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure>
<p>问题是，你的组件里其他元素的 box-sizing 也需要是 content-box 啊，而你早设定了所有 box-sizing 都为 border-box。</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="title">div</span> <span class="attribute">class</span>=<span class="value">"component"</span>&gt;</span> <span class="comment">&lt;!-- I'm content-box --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="title">header</span>&gt;</span> <span class="comment">&lt;!-- I'm border-box still --&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="title">header</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="title">div</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>解决方法就是使用 inheriting ~</p>
<p>可能你早就用习惯了旧方式的 box-sizing ，也没关系。但是作为一个有逼格的前端，要时刻为重构准备着。</p>
]]></content>
    <summary type="html">
    <![CDATA[<p>相信很多人跟我一样都非常喜欢使用 box-sizing ，用法大致是这样：</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">*, *<span cla]]>
    </summary>
    
      <category term="box-sizing" scheme="http://w3ctrain.com/tags/box-sizing/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[+new Date是什么意思？]]></title>
    <link href="http://w3ctrain.com/2016/02/17/unary-add/"/>
    <id>http://w3ctrain.com/2016/02/17/unary-add/</id>
    <published>2016-02-17T15:13:11.000Z</published>
    <updated>2016-02-19T03:45:47.000Z</updated>
    <content type="html"><![CDATA[<p>JavaScript中可以在某个元素前使用 ‘+’ 号，这个操作是将该元素转换秤Number类型，如果转换失败，那么将得到 NaN。</p>
<p>所以 +new Date 将会调用 Date.prototype 上的 valueOf 方法，而根据 <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Date/valueOf" target="_blank" rel="external">MDN</a> ，Date.prototype.value 方法等同于 Date.prototype.getTime() 。</p>
<p>所以下列代码效果相同：</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(+<span class="keyword">new</span> <span class="built_in">Date</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">new</span> <span class="built_in">Date</span>().getTime());</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">new</span> <span class="built_in">Date</span>().valueOf());</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="keyword">new</span> <span class="built_in">Date</span>() * <span class="number">1</span>);</span><br></pre></td></tr></table></figure>
<p>（你可以直接在 Chrome 开发者工具下的 Console 面板测试输出结果）</p>
<p>初学者最好不要用这种 Unary Operator 的 ‘+’…不利于其他初学者阅读！<br>—— 看别人写的代码有感！<br><img src="https://dn-w3ctrain.qbox.me/kendiea.jpg" alt="坑爹啊"></p>
<h2 id="推荐阅读：">推荐阅读：</h2><ul>
<li><a href="http://xkr.us/articles/javascript/unary-add/" target="_blank" rel="external">The unary + operator</a></li>
<li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Arithmetic_Operators#Unary_plus" target="_blank" rel="external">MDN - Unary plus (+)</a></li>
</ul>
]]></content>
    <summary type="html">
    <![CDATA[<p>JavaScript中可以在某个元素前使用 ‘+’ 号，这个操作是将该元素转换秤Number类型，如果转换失败，那么将得到 NaN。</p>
<p>所以 +new Date 将会调用 Date.prototype 上的 valueOf 方法，而根据 <a href="htt]]>
    </summary>
    
      <category term="+new Date" scheme="http://w3ctrain.com/tags/new-Date/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[漫谈SMACSS]]></title>
    <link href="http://w3ctrain.com/2016/02/05/smacss/"/>
    <id>http://w3ctrain.com/2016/02/05/smacss/</id>
    <published>2016-02-05T05:17:50.000Z</published>
    <updated>2016-02-05T16:00:22.000Z</updated>
    <content type="html"><![CDATA[<p><a href="https://smacss.com/" target="_blank" rel="external">SMACSS</a> （Scalable and Modular Architecture for CSS）发音同“smacks”，它不是框架，不是库。它只是一种组织CSS代码的方法论(或者说是为了让代码可扩展，易维护的一套规范，它会使团队开发更容易)。每个人看世界的角度不同，方法论因人而异，所以这套玩意儿不一定适合你。</p>
<h2 id="CSS分类">CSS分类</h2><p>按照SMACSS可以分为5类：</p>
<ol>
<li><p><strong>Base</strong> —— 通常是一些默认样式，reset.css ，normalize.css 之类</p>
 <figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="tag">html</span>, <span class="tag">body</span>, <span class="tag">form</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">margin</span>:<span class="value"> <span class="number">0</span></span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"><span class="tag">input</span><span class="attr_selector">[type=text]</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">border</span>:<span class="value"> <span class="number">1px</span> solid <span class="hexcolor">#999</span></span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"><span class="tag">a</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">color</span>:<span class="value"> <span class="hexcolor">#390</span></span></span>;</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Layout</strong> —— Layout 则是将页面分成几个部分，一个 Layout 中可以有一个或多个Module</p>
 <figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="class">.nav</span> <span class="rules">&#123;</span><br><span class="line">&#125;</span></span><br><span class="line"><span class="class">.footer</span> <span class="rules">&#123;</span><br><span class="line">&#125;</span></span><br><span class="line"><span class="class">.sidebar</span> <span class="rules">&#123;</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Module</strong> —— 这个部分是可复用，模块化的代码，比如弹出框，汉堡按钮。</p>
 <figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="class">.panel</span> <span class="rules">&#123;</span><br><span class="line">&#125;</span></span><br><span class="line"><span class="class">.panel-body</span> <span class="rules">&#123;</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>State</strong> —— 状态是用来描述Layout，Module的特殊样式。</p>
 <figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="class">.is-hidden</span> <span class="rules">&#123;</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Theme</strong> —— Theme是定义多种主题</p>
</li>
</ol>
<h3 id="命名规则">命名规则</h3><p>通常使用<code>l-</code>前缀标记这个类名是 Layout, <code>is-</code> 前缀标记为状态类等等，而Modules不需要，该是什么名字就叫什么。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="comment">/* Example Module */</span></span><br><span class="line"><span class="class">.example</span> <span class="rules">&#123; &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* Callout Module */</span></span><br><span class="line"><span class="class">.callout</span> <span class="rules">&#123; &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* Callout Module with State  */</span></span><br><span class="line"><span class="class">.callout</span><span class="class">.is-collapsed</span> <span class="rules">&#123; &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* Inline layout */</span></span><br><span class="line"><span class="class">.l-inline</span> <span class="rules">&#123; &#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="属性分组">属性分组</h3><p>修改css属性时，我们常常需要肉眼搜索目标属性。如果属性杂乱无章，那么我们得花更多的时间查找。有人开发过按css属性字母顺序排列的插件，个人认为不好用，比如需要修改宽高时，需要找到height，再找到width，还是挺麻烦。而通常这类参数是成组出现的。</p>
<p>我们可以按照下列顺序书写：</p>
<ul>
<li>Box ( display, float, position, left, top, height, width… )</li>
<li>Border ( border, border-image, border-radius… )</li>
<li>Background ( background-color, background-image… )</li>
<li>Text ( font-family, font-size, text-transform… )</li>
<li>Other ( other )</li>
</ul>
<h3 id="选择器性能优化">选择器性能优化</h3><p>CSS选择器从右到左进行匹配</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="tag">body</span> <span class="tag">div</span><span class="id">#content</span> <span class="tag">p</span> <span class="rules">&#123; </span><br><span class="line">  <span class="rule"><span class="attribute">color</span>:<span class="value"> <span class="hexcolor">#003366</span></span></span>; </span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure>
<p>在浏览器查找到p元素的时候，就会往上找是否有div#content这样的父元素，若找到了，则继续向上搜索，知道匹配成功，添加到渲染树中；若找不到，则匹配失败，这块样式不起作用。</p>
<p><strong>控制好饮食，小心吃撑：</strong>虽然后代选择器很方便，但是从上面的分析看出来，没遇到p元素，我们都要执行一次向上搜索，代价显然是很昂贵的。</p>
<p>遵循下面三条规范可以帮助你健身：</p>
<ul>
<li>使用子类选择器（’&gt;’，IE6我对不起你）</li>
<li>避免使用常用的标签选择器</li>
<li>最右选择器使用类名</li>
</ul>
<p>比如你DOM中有一打H3，假设使用<code>.module h3</code>这样的选择器，那么对于<code>html &gt; body &gt; div &gt; div &gt; ... &gt; h3</code>这样的节点，向上搜索的路径就长了去。改成<code>.module &gt; h3</code>我们只需要搜索24个元素。</p>
<h3 id="颜色声明">颜色声明</h3><p>尽量使用3或6位的16进制颜色值，因为它们足够简洁。rgb,hsl就稍微有点长了。当然rgba, hsla就避免不了，因为十六进制没有alpha值。</p>
<h3 id="文件组织">文件组织</h3><ul>
<li>把所有基本样式放在单独文件</li>
<li>layout 取决你文件的大小，细化成多个文件或者是放在同一个文件</li>
<li>每个模块都独立一个文件</li>
<li>子模块取决于项目的大小</li>
<li>全局states放在单独文件</li>
<li>layout,modules states 以及 media queries 放在相应的 modules 文件中</li>
</ul>
<p>结合Sass, 文件树如下：</p>
<figure class="highlight"><table><tr><td class="code"><pre><span class="line">+-layout/ &#10;| +-grid.scss &#10;| +-alternate.scss &#10;+-module/ &#10;| +-callout.scss &#10;| +-bookmarks.scss &#10;| +-btn.scss &#10;| +-btn-compose.scss &#10;+-base.scss &#10;+-states.scss</span><br></pre></td></tr></table></figure>
<p>然后在main.scss中引入，<br><figure class="highlight scss"><table><tr><td class="code"><pre><span class="line"><span class="at_rule">@<span class="keyword">import</span></span><br><span class="line">  <span class="string">"base"</span>,</span><br><span class="line">  <span class="string">"states"</span>,</span><br><span class="line">  <span class="string">"layout/grid"</span>,</span><br><span class="line">  <span class="string">"module/btn"</span>,</span><br><span class="line"><span class="preprocessor">	...</span></span></span><br></pre></td></tr></table></figure></p>
<p>最终产出一个 main.css 文件。可以参考 jonathanpath 的 SASS-SMACSS，<a href="https://github.com/jonathanpath/SASS-SMACSS" target="_blank" rel="external">github地址</a></p>
<p><img src="https://dn-w3ctrain.qbox.me/sass-smacss.jpg" alt="Sass-SMACSS"></p>
<h2 id="其他资源">其他资源</h2><p><strong>CSS Preprocessors</strong></p>
<ul>
<li>LESS</li>
<li>Sass</li>
</ul>
<p><strong>其他方法论</strong></p>
<ul>
<li>OOCSS</li>
<li>BEM</li>
</ul>
<p><strong>文档</strong></p>
<ul>
<li><a href="http://24ways.org/2011/front-end-style-guides" target="_blank" rel="external">Front-end Style Guides</a></li>
</ul>
<p><strong>其他资源</strong></p>
<ul>
<li><a href="http://mustache.github.com/" target="_blank" rel="external">mustache</a>是一个轻逻辑的模板语言，不受环境影响。</li>
</ul>
<p><strong>更高级的规范</strong></p>
<ul>
<li>墙裂推荐 <a href="http://hugogiraudel.com/" target="_blank" rel="external"> Hugo Giraudel</a> 的 <a href="http://sass-guidelin.es/" target="_blank" rel="external">Sass Guidelines</a></li>
</ul>
<h2 id="彩蛋">彩蛋</h2><p>我买了 <a href="https://smacss.com/" target="_blank" rel="external">SMACSS 电子书</a>，这篇文章是我的学习笔记 + 要点总结。如有需要，留下邮箱，我可以把电子书共享给你（仅供学习交流使用），或者扫描 WeChat 二维码加我为好友。</p>
<p><img src="https://dn-w3ctrain.qbox.me/WeChat.jpeg" alt="WeChat QrCode" style="width: 288px"></p>
]]></content>
    <summary type="html">
    <![CDATA[<p><a href="https://smacss.com/" target="_blank" rel="external">SMACSS</a> （Scalable and Modular Architecture for CSS）发音同“smacks”，它不是框架，不是库。]]>
    </summary>
    
      <category term="SMACSS" scheme="http://w3ctrain.com/tags/SMACSS/"/>
    
      <category term="Sass" scheme="http://w3ctrain.com/tags/Sass/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[如何调试CSS的关键帧(keyframe)动画]]></title>
    <link href="http://w3ctrain.com/2016/02/04/debug-animation/"/>
    <id>http://w3ctrain.com/2016/02/04/debug-animation/</id>
    <published>2016-02-03T16:23:44.000Z</published>
    <updated>2016-02-03T16:29:12.000Z</updated>
    <content type="html"><![CDATA[<blockquote>
<p>我们可以学习语法来创建CSS动画，但创造美丽流畅的动画可能就要关注更多细节了。如今动画被高度关注，因此正确调整代码动画的时间，以及出错时各种调试方法突显重要。在自己解决这个问题后整理一番。</p>
</blockquote>
<h2 id="使用负值延迟">使用负值延迟</h2><p>当多个动画同时运行，我们想他们错开一点。这时可以用<code>animation-delay</code>，但你不一定想用户访问页面时，他们要等待延迟看到某些元素不动的情况。</p>
<p>这时，将<code>animation-delay</code>设置成一个负数，它就会跳过几秒直接进入动画，因此显示器显示时所有的动画都是运行状态。当动画有相同的的关键帧动画(keyframe values)而只是运动延迟时间不同，这个方法就可以大展身手了。</p>
<p>当然，使用该概念进行调试也是不错的选择。设置<code>animation-play-state;</code> 然后调整不同负时间的延迟。你会看到动画在运动中的不同暂停状态。</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="class">.thing</span> <span class="rules">&#123;</span><br><span class="line">  <span class="rule"><span class="attribute">animation</span>:<span class="value"> move <span class="number">2s</span> linear infinite alternate</span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">animation-play-state</span>:<span class="value"> paused</span></span>;</span><br><span class="line">  <span class="rule"><span class="attribute">animation-delay</span>:<span class="value"> -<span class="number">1s</span></span></span>;</span><br><span class="line">&#125;</span></span><br></pre></td></tr></table></figure>
<p>例：</p>
<iframe height="268" scrolling="no" src="//codepen.io/team/css-tricks/embed/LVMMGZ/?height=268&theme-id=0&default-tab=result" frameborder="no" allowtransparency="true" allowfullscreen="true" style="width: 100%;">See the Pen <a href="http://codepen.io/team/css-tricks/pen/LVMMGZ/" target="_blank" rel="external">LVMMGZ</a> by CSS-Tricks (<a href="http://codepen.io/css-tricks" target="_blank" rel="external">@css-tricks</a>) on <a href="http://codepen.io" target="_blank" rel="external">CodePen</a>.<br></iframe>


<p>在下面这个有趣的演示中，我们让两个机器人在一个稍微不同的时间移动，从而让动画更自然。这里也是给紫机器人使用负延迟来运行动画，这样用户看到页面时他已经在运动了。</p>
<iframe height="268" scrolling="no" src="//codepen.io/sdras/embed/qdLJLJ/?height=268&theme-id=0&default-tab=result" frameborder="no" allowtransparency="true" allowfullscreen="true" style="width: 100%;">See the Pen <a href="http://codepen.io/sdras/pen/qdLJLJ/" target="_blank" rel="external">Robotter Love</a> by Sarah Drasner (<a href="http://codepen.io/sdras" target="_blank" rel="external">@sdras</a>) on <a href="http://codepen.io" target="_blank" rel="external">CodePen</a>.<br></iframe>

<h2 id="多个transform值">多个<code>transform</code>值</h2><p>为了获得最好的性能，您还应该使用<code>transform</code>来进行移动和变换，从而节省重绘margin / top / left 之类的成本。 Paul Lewis做了一个<a href="http://csstriggers.com/" target="_blank" rel="external">CSS Triggers</a>的列表来表示这些消耗。如果你想移动的东西有多种变换，那么也会有一些问题对应而来。</p>
<p>其中一个大问题就是他们的顺序。<code>transform</code>不会像人们预计的那样同时运行，而是像订单一样操作（有一定的先后顺序）。先运行的是最右边最远的一个，然后向内。例如，在下面的代码里，缩放会先执行(scale)，然后变换(translate)，最后旋转(rotate)。<br><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="at_rule">@<span class="keyword">keyframes</span> foo </span>&#123;</span><br><span class="line"> <span class="tag">to</span> <span class="rules">&#123;</span><br><span class="line">   <span class="comment">/*         第三           第二              第一      */</span></span><br><span class="line">   <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">rotate</span>(<span class="number">90deg</span>) <span class="function">translateX</span>(<span class="number">30px</span>) <span class="function">scale</span>(<span class="number">1.5</span>)</span></span>;</span><br><span class="line"> &#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>然而在大多数情况下这并不是理想情况，有时候你宁愿他们同时运动。此外，当你开始在多个<code>keyframe</code>里同时使用<code>transform</code>的值时候情况会变得更加复杂，像这样:</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="at_rule">@<span class="keyword">keyframes</span> foo </span>&#123;</span><br><span class="line">  30% <span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">rotateY</span>(<span class="number">360deg</span>)</span></span>;</span><br><span class="line">  &#125;</span></span><br><span class="line">  65% <span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">translateY</span>(-<span class="number">30px</span>) <span class="function">rotateY</span>(-<span class="number">360deg</span>) <span class="function">scale</span>(<span class="number">1.5</span>)</span></span>;</span><br><span class="line">  &#125;</span></span><br><span class="line">  90% <span class="rules">&#123;</span><br><span class="line">    <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">translateY</span>(<span class="number">10px</span>) <span class="function">scale</span>(<span class="number">0.75</span>)</span></span>;</span><br><span class="line">  &#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后就有一些奇怪的，出乎意料的事情发生了。不幸的是，解决这个问题的答案通常是嵌套多个&lt; div &gt;，每个用一种<code>translation</code>，这样才不会出现冲突。<br>像这样：</p>
<iframe height="268" scrolling="no" src="//codepen.io/cyseria/embed/obMgZE/?height=268&theme-id=0&default-tab=result" frameborder="no" allowtransparency="true" allowfullscreen="true" style="width: 100%;">See the Pen <a href="http://codepen.io/cyseria/pen/obMgZE/" target="_blank" rel="external">Show Order of Operations Transform Fail</a> by cyseria (<a href="http://codepen.io/cyseria" target="_blank" rel="external">@cyseria</a>) on <a href="http://codepen.io" target="_blank" rel="external">CodePen</a>.<br></iframe><br>当然也有一些解决方法，比如使用矩阵变换(不是直观的手工代码)或使用一个JavaScript动画API，如<a href="http://greensock.com/" target="_blank" rel="external">GreenSock</a>，它可以让你不需要使用有序的序列来插入多个变换。<br><br>多使用个div也可以解决SVG的一些问题。例如在safari中，你不能在一个动画中同时声明透明度（opacity）和转换（transform），不然其中一个肯定无效。<br>2015年8月初，独立的变换声明（<a href="https://drafts.csswg.org/css-transforms-2/#individual-transforms" target="_blank" rel="external">ndependent transform declarations</a>）已经加入到了Chrome的Canary版本中。这意味着我们不用担心用更多的变换效果，可以分别声明<code>rotate</code>,<code>translate</code>和<code>scale</code>。<br><br>## 使用DevTools的时间控制器<br>无论是chrome还是firefox现在都有一些专门用于调试动画的工具，比如可以控制动画速度的滑块，暂停按钮和一些简单数值的UI测试(UI for working with the easing values)，通过放慢速度，暂停来观察动画的特殊点，是CSS动画中的一个非常有用的调试方法。<br><br>两个浏览器都使用Lea Verou的<a href="http://cubic-bezier.com/#.17,.67,.83,.67" target="_blank" rel="external">cubic-bezier.com</a>的可视化GUI。因此我们就不用反复去cubic-bezier.com调整再修改文本编辑器中的代码了。<br><br>这些工具让我们更直观的调整动画，来看看两个浏览器的界面：<br><img src="https://dn-w3ctrain.qbox.me/chrome-devopt2.jpg" alt="chrome animation tool"><br><br><img src="https://dn-w3ctrain.qbox.me/firefox-dev-opt2.jpg" alt="firefox animation tool"><br><br>chrome和firefox不仅可以控制动画时间（加速或者减速），还可以使用自定义动画。更为先进的时间轴工具也<a href="https://www.youtube.com/watch?v=U9xfYbKxosI" target="_blank" rel="external">即将chrome发布（ youtube视频需翻墙）</a>，它可以同时观看多个元素。毕竟，一次只能处理一个元素实在是动画调整中一个不小的限制。<br><br>还有一个麻烦就是如果动画的存在时间很短很快我就很难抓取到了，所以通常要对其设置<code>animation-iteration-count: infinite;</code>，才能不用太在意时间继续调试。<br><br>当然还有一些额外的工具去帮助我们让动画在浏览器中慢下来以此调整，回放。它允许你从根本上分开每个动作，观察元素之间的相互影响以及他们的运动状态。当你改变它的速度使其变流畅，整体效果也会更加出色的。<br><br>## 使用JavaScript调试CSS动画事件<br>如果你不想去计算动画到底是什么时间什么地方出错了，你可以在事件触发时用一点点的javascript来调试，将其添加到<code>animationstart</code>，<code>animationiteration</code>和<code>animationend</code>事件上。<br>例如：<br><iframe height="268" scrolling="no" src="//codepen.io/sdras/embed/PqXeMX/?height=268&theme-id=0&default-tab=result" frameborder="no" allowtransparency="true" allowfullscreen="true" style="width: 100%;">See the Pen <a href="http://codepen.io/sdras/pen/PqXeMX/" target="_blank" rel="external">Showing how to Debug CSS Animation Play States in JavaScript</a> by Sarah Drasner (<a href="http://c
odepen.io/sdras" target="_blank" rel="external">@sdras</a>) on <a href="http://codepen.io" target="_blank" rel="external">CodePen</a>.<br></iframe>

<h2 id="保持keyframe整洁">保持keyframe整洁</h2><p>我经常看到有些人在keyframe的0%和100%中声明相同的属性值，这是完全没必要的而且会让代码变得很臃肿。浏览器将默认属性值作为初始值和结束值。</p>
<p>像这样子就是太肿了：<br><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="class">.element</span> <span class="rules">&#123;</span><br><span class="line"> <span class="rule"><span class="attribute">animation</span>:<span class="value"> animation-name <span class="number">2s</span> linear infinite</span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"> </span><br><span class="line"><span class="at_rule">@<span class="keyword">keyframes</span> animation-name </span>&#123;</span><br><span class="line">  0% <span class="rules">&#123;</span><br><span class="line">   <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">translateX</span>(<span class="number">200px</span>)</span></span>;</span><br><span class="line"> &#125;</span></span><br><span class="line">  50% <span class="rules">&#123;</span><br><span class="line">   <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">translateX</span>(<span class="number">350px</span>)</span></span>;</span><br><span class="line"> &#125;</span></span><br><span class="line"> 100% <span class="rules">&#123;</span><br><span class="line">   <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">translateX</span>(<span class="number">200px</span>)</span></span>;</span><br><span class="line"> &#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>正确的写法：<br><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="class">.element</span> <span class="rules">&#123;</span><br><span class="line"> <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">translateX</span>(<span class="number">200px</span>)</span></span>;</span><br><span class="line"> <span class="rule"><span class="attribute">animation</span>:<span class="value"> animation-name <span class="number">2s</span> linear infinite</span></span>;</span><br><span class="line">&#125;</span></span><br><span class="line"> </span><br><span class="line"><span class="at_rule">@<span class="keyword">keyframes</span> animation-name </span>&#123;</span><br><span class="line">  50% <span class="rules">&#123;</span><br><span class="line">   <span class="rule"><span class="attribute">transform</span>:<span class="value"> <span class="function">translateX</span>(<span class="number">350px</span>)</span></span>;</span><br><span class="line"> &#125;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="DRY-ing_Out_Animations">DRY-ing Out Animations</h2><p>创造简洁漂亮的动画通常意味着写一个具体的<code>cubic-bezier()</code>函数。调整Easing函数的工作类似于公司的调色板。你可以在运动中拥有属于自己个性的标志和“声音”。如果你想在整个网站中使用（为了保持统一，你应该这样做），最简单的方法是将一个或两个Easing函数存储在一个变量中，就像我们将颜料混合在调色板里。使用SASS或者其他的于处理器可以让其更简单：<br><figure class="highlight scss"><table><tr><td class="code"><pre><span class="line"><span class="comment">//scss</span></span><br><span class="line"><span class="variable">$smooth</span><span class="value">: <span class="function">cubic-bezier</span>(<span class="number">0.17</span>, <span class="number">0.67</span>, <span class="number">0.48</span>, <span class="number">1.28</span>);</span></span><br><span class="line"> </span><br><span class="line"><span class="class">.foo</span> &#123; <span class="attribute">animation</span><span class="value">: animation-name <span class="number">3s</span> <span class="variable">$smooth</span>;</span> &#125;</span><br><span class="line"> </span><br><span class="line"><span class="class">.bar</span> &#123; <span class="attribute">animation</span><span class="value">: animation-name <span class="number">1s</span> <span class="variable">$smooth</span>;</span> &#125;</span><br></pre></td></tr></table></figure></p>
<p>当使用css的keyframe来做动画时我们希望尽可能用到GPU的性能，这就意味着如果你有多个动画你想更容易的DOM操作给接下来要加载的运动和懒加载的元素。你可以用CSS中的标准声明块让硬件加速原生的DOM（不是SVG）。复用元素的动画是有意义的，这里使用mixin:<br><figure class="highlight scss"><table><tr><td class="code"><pre><span class="line"><span class="at_rule">@<span class="keyword">mixin</span><span class="preprocessor"> accelerate</span>(<span class="variable">$name</span>) &#123;</span></span><br><span class="line"> will-change<span class="value">: <span class="variable">$name</span>;</span></span><br><span class="line"> <span class="attribute">transform</span><span class="value">: <span class="function">translateZ</span>(<span class="number">0</span>);</span></span><br><span class="line"> <span class="attribute">backface-visibility</span><span class="value">: hidden;</span></span><br><span class="line"> <span class="attribute">perspective</span><span class="value">: <span class="number">1000px</span>;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class">.foo</span> &#123;</span><br><span class="line">  <span class="at_rule">@<span class="keyword">include</span><span class="preprocessor"> accelerate</span>(transform);</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>当心，一次性转移太多元素可能会造成相反的效果并影响其性能。大多数动画应该正常，但是要如果你使用类似haml之类的标记语言来生成大量DOM元素时候要注意。</p>
<h2 id="使用循环来获得更好的性能">使用循环来获得更好的性能</h2><p>Smashing Magazine最近发表的一个工作之余的神奇项目，<a href="http://species-in-pieces.com/" target="_blank" rel="external">http://species-in-pieces.com/</a>。在一个特定的部分，作者讨论了关于动画细节，其碎片导致的性能问题。他说：</p>
<blockquote>
<p>假设你正在同时移动三十个物体，浏览器就要处理很多东西，然后或许就会有一些问题出现。如果你每个元素有0,199秒的速度和0.2秒的延迟，你可能会一次移动一个元素来修复这些问题。事实上，相同的运动并没必要重复产生。如果动画是一个链，性能是立即提高了30倍。</p>
</blockquote>
<figure class="highlight scss"><table><tr><td class="code"><pre><span class="line"><span class="at_rule">@<span class="keyword">for</span> <span class="variable">$i</span><span class="preprocessor"> from</span><span class="preprocessor"> 1</span><span class="preprocessor"> through</span> <span class="variable">$n</span> &#123;</span></span><br><span class="line">  &amp;<span class="pseudo">:nth-child</span>(#&#123;<span class="variable">$i</span>&#125;) &#123;</span><br><span class="line">    <span class="attribute">animation</span><span class="value">: loadIn <span class="number">2s</span> #&#123;<span class="variable">$i</span>*<span class="number">0.11</span>&#125;s <span class="variable">$easeOutSine</span> forwards;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>不仅如此,您可以使用它们来产生像颜色交错的视觉效果。(点击回放重新运行动画。)</p>
<p><iframe height="268" scrolling="no" src="//codepen.io/sdras/embed/RPEMZr/?height=268&theme-id=0&default-tab=result" frameborder="no" allowtransparency="true" allowfullscreen="true" style="width: 100%;">See the Pen <a href="http://codepen.io/sdras/pen/RPEMZr/" target="_blank" rel="external">SASS for loops in CSS Animations</a> by Sarah Drasner (<a href="http://codepen.io/sdras" target="_blank" rel="external">@sdras</a>) on <a href="http://codepen.io" target="_blank" rel="external">CodePen</a>.<br></iframe></p>
<h2 id="调整多动画序列">调整多动画序列</h2><p>当你在创建长动画时，我们通常将其排列成链式。类似:<br><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="rule"><span class="attribute">animation</span>:<span class="value"> foo <span class="number">3s</span> ease-in-out, bar <span class="number">4s</span> <span class="number">3s</span> ease-in-out, brainz <span class="number">6s</span> <span class="number">7s</span> ease-in-out</span></span>;</span><br></pre></td></tr></table></figure></p>
<p>但是我们想想当你优化的时候，你发现你想改变动画的第二个属性值，这会影响接下来的它之后的所有元素，所以当我们调整之后。好像没什么大问题：<br><figure class="highlight css"><table><tr><td class="code"><pre><span class="line"><span class="rule"><span class="attribute">animation</span>:<span class="value"> foo <span class="number">2.5s</span> ease-in-out, bar <span class="number">4s</span> <span class="number">2.5s</span> ease-in-out, brainz <span class="number">6s</span> <span class="number">6.5s</span> ease-in-out</span></span>;</span><br></pre></td></tr></table></figure></p>
<p>现在让我们添加另一个动画也要再次进行调整（好的动画产生之前这种微调似乎是必然的），于是事情的效率好像就有点低了。当你这么做了3次，真的就非常低效率。<br>接着你可以想象一下如果你有两个动画并且要让他们保持一致…嗯你理解就好。这就是为什么每当当链式动画效果超越三个或四个，我就会使用JavaScript了。就个人而言，我比较喜欢<a href="https://greensock.com/" target="_blank" rel="external">GreenSock animation API</a>因为它有非常强健的时间轴功能，但是很多JS允许你在不重新计算的情况下使用简单的堆栈动画创造工作流。</p>
<h2 id="∞">∞</h2><p>制作一个动画不仅仅是构建起来。通常情况下，它是人们通过编辑精炼和调试从而让一个项目从一个只是精心策划过的的运动变成一个有更好的性能的动画。希望这些建议能够成为你工具箱的工具，使你工作起来更加顺畅。</p>
]]></content>
    <summary type="html">
    <![CDATA[<blockquote>
<p>我们可以学习语法来创建CSS动画，但创造美丽流畅的动画可能就要关注更多细节了。如今动画被高度关注，因此正确调整代码动画的时间，以及出错时各种调试方法突显重要。在自己解决这个问题后整理一番。</p>
</blockquote>
<h2 id="使用负]]>
    </summary>
    
      <category term="animation" scheme="http://w3ctrain.com/tags/animation/"/>
    
      <category term="debug" scheme="http://w3ctrain.com/tags/debug/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[实用的javascript小技巧]]></title>
    <link href="http://w3ctrain.com/2016/01/19/jstips/"/>
    <id>http://w3ctrain.com/2016/01/19/jstips/</id>
    <published>2016-01-19T07:47:49.000Z</published>
    <updated>2016-01-19T09:09:22.000Z</updated>
    <content type="html"><![CDATA[<h2 id="数组插入">数组插入</h2><p>插入数据是家常便饭了，我们可以使用push插入到数组的后端，unshift插入到数组前端，也可以使用splice插入到中间。</p>
<p>然而有相应的方法并不意味着它们就是效率最优。</p>
<p>同样是插入数据，第二种效率高很多。<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>];</span><br><span class="line"></span><br><span class="line">arr.push(<span class="number">6</span>);</span><br><span class="line">arr[arr.length] = <span class="number">6</span>; <span class="comment">// 43% faster in Chrome 47.0.2526.106 on Mac OS X 10.11.1</span></span><br></pre></td></tr></table></figure></p>
<p>两种方法都修改了原始数组，不信？ 瞧瞧这里 <a href="http://jsperf.com/push-item-inside-an-array" target="_blank" rel="external">jsperf</a></p>
<p>插入到数组前端也一样，使用concat比unshift更高效。<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>];</span><br><span class="line"></span><br><span class="line">arr.unshift(<span class="number">0</span>);</span><br><span class="line">[<span class="number">0</span>].concat(arr); <span class="comment">// 98% faster in Chrome 47.0.2526.106 on Mac OS X 10.11.1</span></span><br></pre></td></tr></table></figure></p>
<p>值得一提的是，unshift修改了原来的数组，而concat返回一个新的数组 <a href="http://jsperf.com/unshift-item-inside-an-array" target="_blank" rel="external">jsperf</a></p>
<p>使用splice在数组中间插入是最高效的做法了。<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> items = [<span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'three'</span>, <span class="string">'four'</span>];</span><br><span class="line">items.splice(items.length / <span class="number">2</span>, <span class="number">0</span>, <span class="string">'hello'</span>);</span><br></pre></td></tr></table></figure></p>
<h2 id="优化层叠的条件判断">优化层叠的条件判断</h2><p>如果你看到这堆条件判断代码，你会如何优化它？<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (color) &#123;</span><br><span class="line">  <span class="keyword">if</span> (color === <span class="string">'black'</span>) &#123;</span><br><span class="line">    printBlackBackground();</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (color === <span class="string">'red'</span>) &#123;</span><br><span class="line">    printRedBackground();</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (color === <span class="string">'blue'</span>) &#123;</span><br><span class="line">    printBlueBackground();</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (color === <span class="string">'green'</span>) &#123;</span><br><span class="line">    printGreenBackground();</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    printYellowBackground();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>一种方式是使用switch，尽管这样能简介并且更有序，但不推荐这样做，因为会给debug增加麻烦：<a href="https://toddmotto.com/deprecating-the-switch-statement-for-object-literals/" target="_blank" rel="external">原因</a><br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">switch</span>(color) &#123;</span><br><span class="line">  <span class="keyword">case</span> <span class="string">'black'</span>:</span><br><span class="line">    printBlackBackground();</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> <span class="string">'red'</span>:</span><br><span class="line">    printRedBackground();</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> <span class="string">'blue'</span>:</span><br><span class="line">    printBlueBackground();</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">case</span> <span class="string">'green'</span>:</span><br><span class="line">    printGreenBackground();</span><br><span class="line">    <span class="keyword">break</span>;</span><br><span class="line">  <span class="keyword">default</span>:</span><br><span class="line">    printYellowBackground();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>尽可能的避免使用switch，那么最高效的做法就是通过一个object了。<br><figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> colorObj = &#123;</span><br><span class="line">  <span class="string">'black'</span>: printBlackBackground,</span><br><span class="line">  <span class="string">'red'</span>: printRedBackground,</span><br><span class="line">  <span class="string">'blue'</span>: printBlueBackground,</span><br><span class="line">  <span class="string">'green'</span>: printGreenBackground,</span><br><span class="line">  <span class="string">'yellow'</span>: printYellowBackground</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (color &amp;&amp; colorObj.hasOwnProperty(color)) &#123;</span><br><span class="line">  colorObj[color]();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="undefined,null的区别">undefined,null的区别</h2><ul>
<li>undefined 表示一个变量没有被定义，或者定义了没有赋值。</li>
<li>null 是用来给变量赋值，表示”没有值”</li>
<li>JavaScript 会给一个没有初始化的变量赋予undefined</li>
<li>JavaScript 从不会将值赋为null,它是被程序员用来指定一个<code>var</code> 没有值。</li>
<li>undefined 在JSON中不合法，null合法</li>
<li>undefined 的 typeof 也是 undefined</li>
<li>null 的 typeof 是 object, <a href="http://www.2ality.com/2013/10/typeof-null.html" target="_blank" rel="external">为什么</a></li>
<li>它们都是原语</li>
<li>都是 <a href="https://developer.mozilla.org/en-US/docs/Glossary/Falsy" target="_blank" rel="external">falsy</a> (Boolean(undefined) // false, Boolean(null) // false)</li>
<li><p>判断变量是否为undefined</p>
  <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">typeof</span> variable === <span class="string">"undefined"</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>判断变量是否为null</p>
  <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">variable === <span class="literal">null</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>‘==’为true, ‘===’为false</p>
  <figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="literal">null</span> == <span class="literal">undefined</span> <span class="comment">// true</span></span><br><span class="line"><span class="literal">null</span> === <span class="literal">undefined</span> <span class="comment">// false</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h2 id="使用同一个方法处理数组和单一元素">使用同一个方法处理数组和单一元素</h2><p>与其拆分成两个方法来处理，不如写一个方法能同时处理两种情况（类似于jQuery的css方法）</p>
<p>你只需要先将它们并成一个数组，然后处理这个数据即可。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">printUpperCase</span>(<span class="params">words</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> elements = [].concat(words);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; elements.length; i++) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(elements[i].toUpperCase());</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>现在 printUpperCase 准备好了,调用吧。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line">printUpperCase(<span class="string">"cactus"</span>);</span><br><span class="line"><span class="comment">// =&gt; CACTUS</span></span><br><span class="line">printUpperCase([<span class="string">"cactus"</span>, <span class="string">"bear"</span>, <span class="string">"potato"</span>]);</span><br><span class="line"><span class="comment">// =&gt; CACTUS</span></span><br><span class="line"><span class="comment">//  BEAR</span></span><br><span class="line"><span class="comment">//  POTATO</span></span><br></pre></td></tr></table></figure>
<h2 id="检查属性是否在对象上">检查属性是否在对象上</h2><p>任何继承自Object的对象都有in,hasOwnProperty两个方法，你知道它们的区别吗？</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> myObject = &#123;</span><br><span class="line">  name: <span class="string">'@tips_js'</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line">myObject.hasOwnProperty(<span class="string">'name'</span>); <span class="comment">// true</span></span><br><span class="line"><span class="string">'name'</span> <span class="keyword">in</span> myObject; <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line">myObject.hasOwnProperty(<span class="string">'valueOf'</span>); <span class="comment">// false, valueOf is inherited from the prototype chain</span></span><br><span class="line"><span class="string">'valueOf'</span> <span class="keyword">in</span> myObject; <span class="comment">// true</span></span><br></pre></td></tr></table></figure>
<p>只有属性是直接在对象上，hasOwnProperty 才会返回true,而 in 则是不三七二十一，把对象及其原型链都查找了一遍。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> myFunc = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">this</span>.name = <span class="string">'@tips_js'</span>;</span><br><span class="line">&#125;;</span><br><span class="line">myFunc.prototype.age = <span class="string">'10 days'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> user = <span class="keyword">new</span> myFunc();</span><br><span class="line"></span><br><span class="line">user.hasOwnProperty(<span class="string">'name'</span>); <span class="comment">// true</span></span><br><span class="line">user.hasOwnProperty(<span class="string">'age'</span>); <span class="comment">// false, because age is from the prototype chain</span></span><br></pre></td></tr></table></figure>
<p><a href="https://jsbin.com/tecoqa/edit?js,console" target="_blank" rel="external">Demo</a> 看这里</p>
<h2 id="声明提升">声明提升</h2><p>理解好<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/var#var_hoisting" target="_blank" rel="external">声明提升</a>将会帮助你组织好函数作用域。记住，变量声明和函数定义都会被提升。然而不管你是否在同一行声明定义了其他变量，变量定义都不会提升。变量声明是让操作系统知道这是个变量，而定义是给这个变量赋值。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">doTheThing</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ReferenceError: notDeclared is not defined</span></span><br><span class="line">  <span class="built_in">console</span>.log(notDeclared);</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Outputs: undefined</span></span><br><span class="line">  <span class="built_in">console</span>.log(definedLater);</span><br><span class="line">  <span class="keyword">var</span> definedLater;</span><br><span class="line"></span><br><span class="line">  definedLater = <span class="string">'I am defined!'</span></span><br><span class="line">  <span class="comment">// Outputs: 'I am defined!'</span></span><br><span class="line">  <span class="built_in">console</span>.log(definedLater)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Outputs: undefined</span></span><br><span class="line">  <span class="built_in">console</span>.log(definedSimulateneously);</span><br><span class="line">  <span class="keyword">var</span> definedSimulateneously = <span class="string">'I am defined!'</span></span><br><span class="line">  <span class="comment">// Outputs: 'I am defined!'</span></span><br><span class="line">  <span class="built_in">console</span>.log(definedSimulateneously)</span><br><span class="line"></span><br><span class="line">  <span class="comment">// Outputs: 'I did it!'</span></span><br><span class="line">  doSomethingElse();</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">doSomethingElse</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'I did it!'</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// TypeError: undefined is not a function</span></span><br><span class="line">  functionVar();</span><br><span class="line"></span><br><span class="line">  <span class="keyword">var</span> functionVar = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'I did it!'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>为了让代码可读性更高，尽量把你的变量在函数作用域顶部声明，使用之前要明确。</p>
<h2 id="检测一小段javascript的效率">检测一小段javascript的效率</h2><p>为了快速检测javascript代码块的执行效率，我们可以使用 console 方法，比如 console.time(label) 和 console.timeEnd(label)</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="built_in">console</span>.time(<span class="string">"Array initialize"</span>);</span><br><span class="line"><span class="keyword">var</span> arr = <span class="keyword">new</span> <span class="built_in">Array</span>(<span class="number">100</span>),</span><br><span class="line">    len = arr.length,</span><br><span class="line">    i;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">    arr[i] = <span class="keyword">new</span> <span class="built_in">Object</span>();</span><br><span class="line">&#125;;</span><br><span class="line"><span class="built_in">console</span>.timeEnd(<span class="string">"Array initialize"</span>); <span class="comment">// Outputs: Array initialize: 0.711ms</span></span><br></pre></td></tr></table></figure>
<p>更多信息：<a href="https://github.com/DeveloperToolsWG/console-object" target="_blank" rel="external">Console Object</a><br>Demo: <a href="https://jsfiddle.net/meottb62/" target="_blank" rel="external">jsfiddle</a></p>
<h2 id="Node-js:_执行一个模块，如果它不是被required">Node.js: 执行一个模块，如果它不是被required</h2><p>在node中，你可以告知程序在require(‘./something.js’) 和 node something.js 时触发不同的代码。</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">if</span> (!<span class="built_in">module</span>.parent) &#123;</span><br><span class="line">    <span class="comment">// ran with `node something.js`</span></span><br><span class="line">    app.listen(<span class="number">8088</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'app listening on port 8088'</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// used with `require('/.something.js')`</span></span><br><span class="line">    <span class="built_in">module</span>.exports = app;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>查看<a href="https://nodejs.org/api/modules.html#modules_module_parent" target="_blank" rel="external">文档</a>了解更多。</p>
<p>本文的内容部分翻译自：<a href="https://github.com/loverajoel/jstips" target="_blank" rel="external">https://github.com/loverajoel/jstips</a>，一个分享js技巧的仓库，每日更新，感兴趣的自行关注。</p>
]]></content>
    <summary type="html">
    <![CDATA[<h2 id="数组插入">数组插入</h2><p>插入数据是家常便饭了，我们可以使用push插入到数组的后端，unshift插入到数组前端，也可以使用splice插入到中间。</p>
<p>然而有相应的方法并不意味着它们就是效